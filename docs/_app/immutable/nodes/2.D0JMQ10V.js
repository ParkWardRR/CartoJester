import{a as Z,f as at,d as Ke,t as Xr}from"../chunks/lY8hdpW9.js";import"../chunks/CugLJUEY.js";import{a as Fr,aW as Br,F as be,P as dn,J as ct,K as $e,M,L as D,g as v,N as $,O as nn,m as Bt,s as Tt,b7 as lr,b8 as ur,G as vn,I as cr,b9 as ot,u as Et,o as ne,Q as Fe,e as Lr,$ as Hr}from"../chunks/BdNqc16G.js";import{h as Vr}from"../chunks/BP9qeiwy.js";import{e as ht,s as Q}from"../chunks/CxwMCPoX.js";import{i as Nt}from"../chunks/DPz0d9Xh.js";import{b as Mt,m as rn,o as an,i as At,r as Be,s as de,p as jr,q as sn,u as Te,y as Xt,v as Gr,c as Le,w as on,x as Se,k as re,z as Pe,A as Wr,B as Ur,C as Rn,D as ln}from"../chunks/E3m5NH_w.js";import{c as gn,d as Kr,a as pe,s as Dt,E as oe,T as Ut,b as pn}from"../chunks/DI-IkbeY.js";import{b as Qr,a as Zr}from"../chunks/cMQl5epS.js";import{i as ke}from"../chunks/BqbuRJrh.js";import{a as mt,s as Qe,b as Dn}from"../chunks/Bu-jLcw2.js";import{o as Jr,a as fr}from"../chunks/CXIqWPos.js";import{b as Pn}from"../chunks/BAyP35SD.js";function Yn(t,e,n){var r=Br(t,e);r&&r.set&&(t[e]=n,Fr(()=>{t[e]=null}))}var ti=Ke('<path d="M18 6L6 18M6 6l12 12"></path>'),ei=Ke('<path d="M4 6h16M4 12h16M4 18h16"></path>'),ni=at('<div class="mobile-backdrop svelte-85s9jg" role="presentation"></div>'),ri=at('<button><span class="chip-dot svelte-85s9jg"></span> </button>'),ii=at('<button class="era-chip svelte-85s9jg"> </button>'),ai=at('<button><span class="chip-dot svelte-85s9jg"></span> </button>'),si=at('<div class="tag-category svelte-85s9jg"><button><span class="cat-emoji svelte-85s9jg"> </span> <span class="cat-label svelte-85s9jg"> </span> <span class="cat-count svelte-85s9jg"> </span></button> <div class="chip-grid svelte-85s9jg"></div></div>'),oi=at('<button class="mobile-toggle svelte-85s9jg" aria-label="Toggle filters"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><!></svg> <span class="toggle-badge svelte-85s9jg"> </span></button> <!> <aside aria-label="Filters"><div class="panel-header svelte-85s9jg"><h2 class="svelte-85s9jg">Filters</h2> <button class="reset-btn svelte-85s9jg" title="Reset all filters"><svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"><path d="M1 4v6h6M23 20v-6h-6"></path><path d="M20.49 9A9 9 0 0 0 5.64 5.64L1 10m22 4l-4.64 4.36A9 9 0 0 1 3.51 15"></path></svg></button></div> <div class="stats-bar svelte-85s9jg"><span class="stat svelte-85s9jg"><strong class="svelte-85s9jg"> </strong> comedians</span> <span class="stat-dot svelte-85s9jg">Â·</span> <span class="stat svelte-85s9jg"><strong class="svelte-85s9jg"> </strong> alliances</span></div> <section class="svelte-85s9jg"><h3 class="svelte-85s9jg">Alliance Types</h3> <div class="chip-grid svelte-85s9jg"></div></section> <section class="svelte-85s9jg"><h3 class="svelte-85s9jg">Era Presets</h3> <div class="chip-grid svelte-85s9jg"></div></section> <section class="tag-categories-section svelte-85s9jg"><h3 class="svelte-85s9jg">Tags</h3> <!></section> <section class="svelte-85s9jg"><h3 class="svelte-85s9jg">Min Weight</h3> <div class="slider-row svelte-85s9jg"><input type="range" min="1" max="5" step="1" class="svelte-85s9jg"/> <span class="slider-val svelte-85s9jg"> </span></div></section> <section class="svelte-85s9jg"><label class="toggle-row svelte-85s9jg"><input type="checkbox" class="svelte-85s9jg"/> <span>Verified only</span></label></section></aside>',1);function li(t,e){be(e,!1);const n=()=>mt(jr,"$nodeStats",o),r=()=>mt(sn,"$enabledEdgeTypes",o),i=()=>mt(Te,"$enabledTags",o),a=()=>mt(rn,"$minWeight",o),s=()=>mt(an,"$showOnlyVerified",o),[o,c]=Qe();let l=Bt(!1);function u(){Tt(l,!v(l))}function y(Y){sn.update(O=>{const X=new Set(O);return X.has(Y)?X.delete(Y):X.add(Y),X})}function f(Y){Te.update(O=>{const X=new Set(O);return X.has(Y)?X.delete(Y):X.add(Y),X})}function h(Y){Te.update(O=>{const X=new Set(O),E=Object.keys(Y.tags);return E.every(H=>X.has(H))?E.forEach(H=>X.delete(H)):E.forEach(H=>X.add(H)),X})}function w(Y,O){return Object.keys(Y.tags).every(X=>O.has(X))}function m(Y,O){const X=Object.keys(Y.tags);return X.some(E=>O.has(E))&&!X.every(E=>O.has(E))}function p(Y,O){Xt.set([Y,O])}function _(){sn.set(new Set(gn)),Te.set(new Set),rn.set(1),Xt.set([1895,2025]),Gr.set("none"),an.set(!1)}ke();var b=oi(),T=dn(b),d=M(T),A=M(d);{var C=Y=>{var O=ti();Z(Y,O)},P=Y=>{var O=ei();Z(Y,O)};Nt(A,Y=>{v(l)?Y(C):Y(P,!1)})}$(d);var B=D(d,2),K=M(B,!0);$(B),$(T);var j=D(T,2);{var tt=Y=>{var O=ni();ht("click",O,u),Z(Y,O)};Nt(j,Y=>{v(l)&&Y(tt)})}var rt=D(j,2);let lt;var g=M(rt),S=D(M(g),2);$(g);var x=D(g,2),k=M(x),z=M(k),I=M(z,!0);$(z),nn(),$(k);var F=D(k,4),J=M(F),it=M(J,!0);$(J),nn(),$(F),$(x);var L=D(x,2),q=D(M(L),2);Mt(q,5,()=>gn,At,(Y,O)=>{var X=ri();let E;var V=M(X),H=D(V);$(X),ct(dt=>{E=de(X,1,"chip svelte-85s9jg",null,E,dt),Dt(X,`--chip-color: ${oe[v(O)]??""}`),Dt(V,`background: ${oe[v(O)]??""}`),Q(H,` ${v(O)??""}`)},[()=>({active:r().has(v(O))})]),ht("click",X,()=>y(v(O))),Z(Y,X)}),$(q),$(L);var G=D(L,2),st=D(M(G),2);Mt(st,5,()=>Kr,At,(Y,O)=>{var X=ii(),E=M(X,!0);$(X),ct(()=>Q(E,v(O).label)),ht("click",X,()=>p(v(O).start,v(O).end)),Z(Y,X)}),$(st),$(G);var U=D(G,2),et=D(M(U),2);Mt(et,1,()=>pe,At,(Y,O)=>{var X=si(),E=M(X);let V;var H=M(E),dt=M(H,!0);$(H);var bt=D(H,2),$t=M(bt,!0);$(bt);var It=D(bt,2),Qt=M(It,!0);$(It),$(E);var jt=D(E,2);Mt(jt,5,()=>Object.entries(v(O).tags),At,(Gt,ee)=>{var kt=lr(()=>ur(v(ee),2));let Rt=()=>v(kt)[0],qt=()=>v(kt)[1];var yt=ai();let ce;var Ee=M(yt),en=D(Ee);$(yt),ct(Or=>{ce=de(yt,1,"chip svelte-85s9jg",null,ce,Or),Dt(yt,`--chip-color: ${qt()??""}`),Dt(Ee,`background: ${qt()??""}`),Q(en,` ${Rt()??""}`)},[()=>({active:i().has(Rt())})]),ht("click",yt,()=>f(Rt())),Z(Gt,yt)}),$(jt),$(X),ct((Gt,ee)=>{V=de(E,1,"category-header svelte-85s9jg",null,V,Gt),Le(E,"title",`Toggle all ${v(O).label??""} tags`),Q(dt,v(O).emoji),Q($t,v(O).label),Q(Qt,ee)},[()=>({"all-active":w(v(O),i()),"partial-active":m(v(O),i())}),()=>Object.keys(v(O).tags).length]),ht("click",E,()=>h(v(O))),Z(Y,X)}),$(U);var ft=D(U,2),Vt=D(M(ft),2),Ct=M(Vt);Be(Ct);var R=D(Ct,2),N=M(R,!0);$(R),$(Vt),$(ft);var W=D(ft,2),nt=M(W),ut=M(nt);Be(ut),nn(2),$(nt),$(W),$(rt),ct(()=>{Q(K,n().nodeCount),lt=de(rt,1,"filter-panel svelte-85s9jg",null,lt,{open:v(l)}),Q(I,n().nodeCount),Q(it,n().edgeCount),Q(N,a())}),ht("click",T,u),ht("click",S,_),Qr(Ct,a,Y=>Dn(rn,Y)),Zr(ut,s,Y=>Dn(an,Y)),Z(t,b),$e(),c()}var ui={value:()=>{}};function Ne(){for(var t=0,e=arguments.length,n={},r;t<e;++t){if(!(r=arguments[t]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new Ye(n)}function Ye(t){this._=t}function ci(t,e){return t.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!e.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}Ye.prototype=Ne.prototype={constructor:Ye,on:function(t,e){var n=this._,r=ci(t+"",n),i,a=-1,s=r.length;if(arguments.length<2){for(;++a<s;)if((i=(t=r[a]).type)&&(i=fi(n[i],t.name)))return i;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++a<s;)if(i=(t=r[a]).type)n[i]=qn(n[i],t.name,e);else if(e==null)for(i in n)n[i]=qn(n[i],t.name,null);return this},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new Ye(t)},call:function(t,e){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,a;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(a=this._[t],r=0,i=a.length;r<i;++r)a[r].value.apply(e,n)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,a=r.length;i<a;++i)r[i].value.apply(e,n)}};function fi(t,e){for(var n=0,r=t.length,i;n<r;++n)if((i=t[n]).name===e)return i.value}function qn(t,e,n){for(var r=0,i=t.length;r<i;++r)if(t[r].name===e){t[r]=ui,t=t.slice(0,r).concat(t.slice(r+1));break}return n!=null&&t.push({name:e,value:n}),t}var yn="http://www.w3.org/1999/xhtml";const On={svg:"http://www.w3.org/2000/svg",xhtml:yn,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Ze(t){var e=t+="",n=e.indexOf(":");return n>=0&&(e=t.slice(0,n))!=="xmlns"&&(t=t.slice(n+1)),On.hasOwnProperty(e)?{space:On[e],local:t}:t}function hi(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===yn&&e.documentElement.namespaceURI===yn?e.createElement(t):e.createElementNS(n,t)}}function di(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function hr(t){var e=Ze(t);return(e.local?di:hi)(e)}function vi(){}function Nn(t){return t==null?vi:function(){return this.querySelector(t)}}function gi(t){typeof t!="function"&&(t=Nn(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var a=e[i],s=a.length,o=r[i]=new Array(s),c,l,u=0;u<s;++u)(c=a[u])&&(l=t.call(c,c.__data__,u,a))&&("__data__"in c&&(l.__data__=c.__data__),o[u]=l);return new wt(r,this._parents)}function pi(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function yi(){return[]}function dr(t){return t==null?yi:function(){return this.querySelectorAll(t)}}function _i(t){return function(){return pi(t.apply(this,arguments))}}function mi(t){typeof t=="function"?t=_i(t):t=dr(t);for(var e=this._groups,n=e.length,r=[],i=[],a=0;a<n;++a)for(var s=e[a],o=s.length,c,l=0;l<o;++l)(c=s[l])&&(r.push(t.call(c,c.__data__,l,s)),i.push(c));return new wt(r,i)}function vr(t){return function(){return this.matches(t)}}function gr(t){return function(e){return e.matches(t)}}var xi=Array.prototype.find;function wi(t){return function(){return xi.call(this.children,t)}}function bi(){return this.firstElementChild}function $i(t){return this.select(t==null?bi:wi(typeof t=="function"?t:gr(t)))}var ki=Array.prototype.filter;function Ni(){return Array.from(this.children)}function Mi(t){return function(){return ki.call(this.children,t)}}function Ai(t){return this.selectAll(t==null?Ni:Mi(typeof t=="function"?t:gr(t)))}function Ei(t){typeof t!="function"&&(t=vr(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var a=e[i],s=a.length,o=r[i]=[],c,l=0;l<s;++l)(c=a[l])&&t.call(c,c.__data__,l,a)&&o.push(c);return new wt(r,this._parents)}function pr(t){return new Array(t.length)}function Ti(){return new wt(this._enter||this._groups.map(pr),this._parents)}function He(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}He.prototype={constructor:He,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function Si(t){return function(){return t}}function zi(t,e,n,r,i,a){for(var s=0,o,c=e.length,l=a.length;s<l;++s)(o=e[s])?(o.__data__=a[s],r[s]=o):n[s]=new He(t,a[s]);for(;s<c;++s)(o=e[s])&&(i[s]=o)}function Ci(t,e,n,r,i,a,s){var o,c,l=new Map,u=e.length,y=a.length,f=new Array(u),h;for(o=0;o<u;++o)(c=e[o])&&(f[o]=h=s.call(c,c.__data__,o,e)+"",l.has(h)?i[o]=c:l.set(h,c));for(o=0;o<y;++o)h=s.call(t,a[o],o,a)+"",(c=l.get(h))?(r[o]=c,c.__data__=a[o],l.delete(h)):n[o]=new He(t,a[o]);for(o=0;o<u;++o)(c=e[o])&&l.get(f[o])===c&&(i[o]=c)}function Ii(t){return t.__data__}function Ri(t,e){if(!arguments.length)return Array.from(this,Ii);var n=e?Ci:zi,r=this._parents,i=this._groups;typeof t!="function"&&(t=Si(t));for(var a=i.length,s=new Array(a),o=new Array(a),c=new Array(a),l=0;l<a;++l){var u=r[l],y=i[l],f=y.length,h=Di(t.call(u,u&&u.__data__,l,r)),w=h.length,m=o[l]=new Array(w),p=s[l]=new Array(w),_=c[l]=new Array(f);n(u,y,m,p,_,h,e);for(var b=0,T=0,d,A;b<w;++b)if(d=m[b]){for(b>=T&&(T=b+1);!(A=p[T])&&++T<w;);d._next=A||null}}return s=new wt(s,r),s._enter=o,s._exit=c,s}function Di(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function Pi(){return new wt(this._exit||this._groups.map(pr),this._parents)}function Yi(t,e,n){var r=this.enter(),i=this,a=this.exit();return typeof t=="function"?(r=t(r),r&&(r=r.selection())):r=r.append(t+""),e!=null&&(i=e(i),i&&(i=i.selection())),n==null?a.remove():n(a),r&&i?r.merge(i).order():i}function qi(t){for(var e=t.selection?t.selection():t,n=this._groups,r=e._groups,i=n.length,a=r.length,s=Math.min(i,a),o=new Array(i),c=0;c<s;++c)for(var l=n[c],u=r[c],y=l.length,f=o[c]=new Array(y),h,w=0;w<y;++w)(h=l[w]||u[w])&&(f[w]=h);for(;c<i;++c)o[c]=n[c];return new wt(o,this._parents)}function Oi(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r=t[e],i=r.length-1,a=r[i],s;--i>=0;)(s=r[i])&&(a&&s.compareDocumentPosition(a)^4&&a.parentNode.insertBefore(s,a),a=s);return this}function Xi(t){t||(t=Fi);function e(y,f){return y&&f?t(y.__data__,f.__data__):!y-!f}for(var n=this._groups,r=n.length,i=new Array(r),a=0;a<r;++a){for(var s=n[a],o=s.length,c=i[a]=new Array(o),l,u=0;u<o;++u)(l=s[u])&&(c[u]=l);c.sort(e)}return new wt(i,this._parents).order()}function Fi(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function Bi(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function Li(){return Array.from(this)}function Hi(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,a=r.length;i<a;++i){var s=r[i];if(s)return s}return null}function Vi(){let t=0;for(const e of this)++t;return t}function ji(){return!this.node()}function Gi(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var i=e[n],a=0,s=i.length,o;a<s;++a)(o=i[a])&&t.call(o,o.__data__,a,i);return this}function Wi(t){return function(){this.removeAttribute(t)}}function Ui(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Ki(t,e){return function(){this.setAttribute(t,e)}}function Qi(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function Zi(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttribute(t):this.setAttribute(t,n)}}function Ji(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function ta(t,e){var n=Ze(t);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((e==null?n.local?Ui:Wi:typeof e=="function"?n.local?Ji:Zi:n.local?Qi:Ki)(n,e))}function yr(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function ea(t){return function(){this.style.removeProperty(t)}}function na(t,e,n){return function(){this.style.setProperty(t,e,n)}}function ra(t,e,n){return function(){var r=e.apply(this,arguments);r==null?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}function ia(t,e,n){return arguments.length>1?this.each((e==null?ea:typeof e=="function"?ra:na)(t,e,n??"")):le(this.node(),t)}function le(t,e){return t.style.getPropertyValue(e)||yr(t).getComputedStyle(t,null).getPropertyValue(e)}function aa(t){return function(){delete this[t]}}function sa(t,e){return function(){this[t]=e}}function oa(t,e){return function(){var n=e.apply(this,arguments);n==null?delete this[t]:this[t]=n}}function la(t,e){return arguments.length>1?this.each((e==null?aa:typeof e=="function"?oa:sa)(t,e)):this.node()[t]}function _r(t){return t.trim().split(/^|\s+/)}function Mn(t){return t.classList||new mr(t)}function mr(t){this._node=t,this._names=_r(t.getAttribute("class")||"")}mr.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function xr(t,e){for(var n=Mn(t),r=-1,i=e.length;++r<i;)n.add(e[r])}function wr(t,e){for(var n=Mn(t),r=-1,i=e.length;++r<i;)n.remove(e[r])}function ua(t){return function(){xr(this,t)}}function ca(t){return function(){wr(this,t)}}function fa(t,e){return function(){(e.apply(this,arguments)?xr:wr)(this,t)}}function ha(t,e){var n=_r(t+"");if(arguments.length<2){for(var r=Mn(this.node()),i=-1,a=n.length;++i<a;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof e=="function"?fa:e?ua:ca)(n,e))}function da(){this.textContent=""}function va(t){return function(){this.textContent=t}}function ga(t){return function(){var e=t.apply(this,arguments);this.textContent=e??""}}function pa(t){return arguments.length?this.each(t==null?da:(typeof t=="function"?ga:va)(t)):this.node().textContent}function ya(){this.innerHTML=""}function _a(t){return function(){this.innerHTML=t}}function ma(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e??""}}function xa(t){return arguments.length?this.each(t==null?ya:(typeof t=="function"?ma:_a)(t)):this.node().innerHTML}function wa(){this.nextSibling&&this.parentNode.appendChild(this)}function ba(){return this.each(wa)}function $a(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function ka(){return this.each($a)}function Na(t){var e=typeof t=="function"?t:hr(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function Ma(){return null}function Aa(t,e){var n=typeof t=="function"?t:hr(t),r=e==null?Ma:typeof e=="function"?e:Nn(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function Ea(){var t=this.parentNode;t&&t.removeChild(this)}function Ta(){return this.each(Ea)}function Sa(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function za(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function Ca(t){return this.select(t?za:Sa)}function Ia(t){return arguments.length?this.property("__data__",t):this.node().__data__}function Ra(t){return function(e){t.call(this,e,this.__data__)}}function Da(t){return t.trim().split(/^|\s+/).map(function(e){var n="",r=e.indexOf(".");return r>=0&&(n=e.slice(r+1),e=e.slice(0,r)),{type:e,name:n}})}function Pa(t){return function(){var e=this.__on;if(e){for(var n=0,r=-1,i=e.length,a;n<i;++n)a=e[n],(!t.type||a.type===t.type)&&a.name===t.name?this.removeEventListener(a.type,a.listener,a.options):e[++r]=a;++r?e.length=r:delete this.__on}}}function Ya(t,e,n){return function(){var r=this.__on,i,a=Ra(e);if(r){for(var s=0,o=r.length;s<o;++s)if((i=r[s]).type===t.type&&i.name===t.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=a,i.options=n),i.value=e;return}}this.addEventListener(t.type,a,n),i={type:t.type,name:t.name,value:e,listener:a,options:n},r?r.push(i):this.__on=[i]}}function qa(t,e,n){var r=Da(t+""),i,a=r.length,s;if(arguments.length<2){var o=this.node().__on;if(o){for(var c=0,l=o.length,u;c<l;++c)for(i=0,u=o[c];i<a;++i)if((s=r[i]).type===u.type&&s.name===u.name)return u.value}return}for(o=e?Ya:Pa,i=0;i<a;++i)this.each(o(r[i],e,n));return this}function br(t,e,n){var r=yr(t),i=r.CustomEvent;typeof i=="function"?i=new i(e,n):(i=r.document.createEvent("Event"),n?(i.initEvent(e,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(e,!1,!1)),t.dispatchEvent(i)}function Oa(t,e){return function(){return br(this,t,e)}}function Xa(t,e){return function(){return br(this,t,e.apply(this,arguments))}}function Fa(t,e){return this.each((typeof e=="function"?Xa:Oa)(t,e))}function*Ba(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,a=r.length,s;i<a;++i)(s=r[i])&&(yield s)}var $r=[null];function wt(t,e){this._groups=t,this._parents=e}function Me(){return new wt([[document.documentElement]],$r)}function La(){return this}wt.prototype=Me.prototype={constructor:wt,select:gi,selectAll:mi,selectChild:$i,selectChildren:Ai,filter:Ei,data:Ri,enter:Ti,exit:Pi,join:Yi,merge:qi,selection:La,order:Oi,sort:Xi,call:Bi,nodes:Li,node:Hi,size:Vi,empty:ji,each:Gi,attr:ta,style:ia,property:la,classed:ha,text:pa,html:xa,raise:ba,lower:ka,append:Na,insert:Aa,remove:Ta,clone:Ca,datum:Ia,on:qa,dispatch:Fa,[Symbol.iterator]:Ba};function xt(t){return typeof t=="string"?new wt([[document.querySelector(t)]],[document.documentElement]):new wt([[t]],$r)}function Ha(t){let e;for(;e=t.sourceEvent;)t=e;return t}function Ft(t,e){if(t=Ha(t),e===void 0&&(e=t.currentTarget),e){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=t.clientX,r.y=t.clientY,r=r.matrixTransform(e.getScreenCTM().inverse()),[r.x,r.y]}if(e.getBoundingClientRect){var i=e.getBoundingClientRect();return[t.clientX-i.left-e.clientLeft,t.clientY-i.top-e.clientTop]}}return[t.pageX,t.pageY]}const Va={passive:!1},ye={capture:!0,passive:!1};function un(t){t.stopImmediatePropagation()}function ae(t){t.preventDefault(),t.stopImmediatePropagation()}function kr(t){var e=t.document.documentElement,n=xt(t).on("dragstart.drag",ae,ye);"onselectstart"in e?n.on("selectstart.drag",ae,ye):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function Nr(t,e){var n=t.document.documentElement,r=xt(t).on("dragstart.drag",null);e&&(r.on("click.drag",ae,ye),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const ze=t=>()=>t;function _n(t,{sourceEvent:e,subject:n,target:r,identifier:i,active:a,x:s,y:o,dx:c,dy:l,dispatch:u}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},identifier:{value:i,enumerable:!0,configurable:!0},active:{value:a,enumerable:!0,configurable:!0},x:{value:s,enumerable:!0,configurable:!0},y:{value:o,enumerable:!0,configurable:!0},dx:{value:c,enumerable:!0,configurable:!0},dy:{value:l,enumerable:!0,configurable:!0},_:{value:u}})}_n.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t};function ja(t){return!t.ctrlKey&&!t.button}function Ga(){return this.parentNode}function Wa(t,e){return e??{x:t.x,y:t.y}}function Ua(){return navigator.maxTouchPoints||"ontouchstart"in this}function Ka(){var t=ja,e=Ga,n=Wa,r=Ua,i={},a=Ne("start","drag","end"),s=0,o,c,l,u,y=0;function f(d){d.on("mousedown.drag",h).filter(r).on("touchstart.drag",p).on("touchmove.drag",_,Va).on("touchend.drag touchcancel.drag",b).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function h(d,A){if(!(u||!t.call(this,d,A))){var C=T(this,e.call(this,d,A),d,A,"mouse");C&&(xt(d.view).on("mousemove.drag",w,ye).on("mouseup.drag",m,ye),kr(d.view),un(d),l=!1,o=d.clientX,c=d.clientY,C("start",d))}}function w(d){if(ae(d),!l){var A=d.clientX-o,C=d.clientY-c;l=A*A+C*C>y}i.mouse("drag",d)}function m(d){xt(d.view).on("mousemove.drag mouseup.drag",null),Nr(d.view,l),ae(d),i.mouse("end",d)}function p(d,A){if(t.call(this,d,A)){var C=d.changedTouches,P=e.call(this,d,A),B=C.length,K,j;for(K=0;K<B;++K)(j=T(this,P,d,A,C[K].identifier,C[K]))&&(un(d),j("start",d,C[K]))}}function _(d){var A=d.changedTouches,C=A.length,P,B;for(P=0;P<C;++P)(B=i[A[P].identifier])&&(ae(d),B("drag",d,A[P]))}function b(d){var A=d.changedTouches,C=A.length,P,B;for(u&&clearTimeout(u),u=setTimeout(function(){u=null},500),P=0;P<C;++P)(B=i[A[P].identifier])&&(un(d),B("end",d,A[P]))}function T(d,A,C,P,B,K){var j=a.copy(),tt=Ft(K||C,A),rt,lt,g;if((g=n.call(d,new _n("beforestart",{sourceEvent:C,target:f,identifier:B,active:s,x:tt[0],y:tt[1],dx:0,dy:0,dispatch:j}),P))!=null)return rt=g.x-tt[0]||0,lt=g.y-tt[1]||0,function S(x,k,z){var I=tt,F;switch(x){case"start":i[B]=S,F=s++;break;case"end":delete i[B],--s;case"drag":tt=Ft(z||k,A),F=s;break}j.call(x,d,new _n(x,{sourceEvent:k,subject:g,target:f,identifier:B,active:F,x:tt[0]+rt,y:tt[1]+lt,dx:tt[0]-I[0],dy:tt[1]-I[1],dispatch:j}),P)}}return f.filter=function(d){return arguments.length?(t=typeof d=="function"?d:ze(!!d),f):t},f.container=function(d){return arguments.length?(e=typeof d=="function"?d:ze(d),f):e},f.subject=function(d){return arguments.length?(n=typeof d=="function"?d:ze(d),f):n},f.touchable=function(d){return arguments.length?(r=typeof d=="function"?d:ze(!!d),f):r},f.on=function(){var d=a.on.apply(a,arguments);return d===a?f:d},f.clickDistance=function(d){return arguments.length?(y=(d=+d)*d,f):Math.sqrt(y)},f}function An(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function Mr(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function Ae(){}var _e=.7,Ve=1/_e,se="\\s*([+-]?\\d+)\\s*",me="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Pt="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Qa=/^#([0-9a-f]{3,8})$/,Za=new RegExp(`^rgb\\(${se},${se},${se}\\)$`),Ja=new RegExp(`^rgb\\(${Pt},${Pt},${Pt}\\)$`),ts=new RegExp(`^rgba\\(${se},${se},${se},${me}\\)$`),es=new RegExp(`^rgba\\(${Pt},${Pt},${Pt},${me}\\)$`),ns=new RegExp(`^hsl\\(${me},${Pt},${Pt}\\)$`),rs=new RegExp(`^hsla\\(${me},${Pt},${Pt},${me}\\)$`),Xn={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};An(Ae,xe,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:Fn,formatHex:Fn,formatHex8:is,formatHsl:as,formatRgb:Bn,toString:Bn});function Fn(){return this.rgb().formatHex()}function is(){return this.rgb().formatHex8()}function as(){return Ar(this).formatHsl()}function Bn(){return this.rgb().formatRgb()}function xe(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=Qa.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?Ln(e):n===3?new _t(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?Ce(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?Ce(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=Za.exec(t))?new _t(e[1],e[2],e[3],1):(e=Ja.exec(t))?new _t(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=ts.exec(t))?Ce(e[1],e[2],e[3],e[4]):(e=es.exec(t))?Ce(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=ns.exec(t))?jn(e[1],e[2]/100,e[3]/100,1):(e=rs.exec(t))?jn(e[1],e[2]/100,e[3]/100,e[4]):Xn.hasOwnProperty(t)?Ln(Xn[t]):t==="transparent"?new _t(NaN,NaN,NaN,0):null}function Ln(t){return new _t(t>>16&255,t>>8&255,t&255,1)}function Ce(t,e,n,r){return r<=0&&(t=e=n=NaN),new _t(t,e,n,r)}function ss(t){return t instanceof Ae||(t=xe(t)),t?(t=t.rgb(),new _t(t.r,t.g,t.b,t.opacity)):new _t}function mn(t,e,n,r){return arguments.length===1?ss(t):new _t(t,e,n,r??1)}function _t(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}An(_t,mn,Mr(Ae,{brighter(t){return t=t==null?Ve:Math.pow(Ve,t),new _t(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?_e:Math.pow(_e,t),new _t(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new _t(Jt(this.r),Jt(this.g),Jt(this.b),je(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Hn,formatHex:Hn,formatHex8:os,formatRgb:Vn,toString:Vn}));function Hn(){return`#${Zt(this.r)}${Zt(this.g)}${Zt(this.b)}`}function os(){return`#${Zt(this.r)}${Zt(this.g)}${Zt(this.b)}${Zt((isNaN(this.opacity)?1:this.opacity)*255)}`}function Vn(){const t=je(this.opacity);return`${t===1?"rgb(":"rgba("}${Jt(this.r)}, ${Jt(this.g)}, ${Jt(this.b)}${t===1?")":`, ${t})`}`}function je(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Jt(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Zt(t){return t=Jt(t),(t<16?"0":"")+t.toString(16)}function jn(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new St(t,e,n,r)}function Ar(t){if(t instanceof St)return new St(t.h,t.s,t.l,t.opacity);if(t instanceof Ae||(t=xe(t)),!t)return new St;if(t instanceof St)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),a=Math.max(e,n,r),s=NaN,o=a-i,c=(a+i)/2;return o?(e===a?s=(n-r)/o+(n<r)*6:n===a?s=(r-e)/o+2:s=(e-n)/o+4,o/=c<.5?a+i:2-a-i,s*=60):o=c>0&&c<1?0:s,new St(s,o,c,t.opacity)}function ls(t,e,n,r){return arguments.length===1?Ar(t):new St(t,e,n,r??1)}function St(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}An(St,ls,Mr(Ae,{brighter(t){return t=t==null?Ve:Math.pow(Ve,t),new St(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?_e:Math.pow(_e,t),new St(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new _t(cn(t>=240?t-240:t+120,i,r),cn(t,i,r),cn(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new St(Gn(this.h),Ie(this.s),Ie(this.l),je(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=je(this.opacity);return`${t===1?"hsl(":"hsla("}${Gn(this.h)}, ${Ie(this.s)*100}%, ${Ie(this.l)*100}%${t===1?")":`, ${t})`}`}}));function Gn(t){return t=(t||0)%360,t<0?t+360:t}function Ie(t){return Math.max(0,Math.min(1,t||0))}function cn(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const Er=t=>()=>t;function us(t,e){return function(n){return t+n*e}}function cs(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function fs(t){return(t=+t)==1?Tr:function(e,n){return n-e?cs(e,n,t):Er(isNaN(e)?n:e)}}function Tr(t,e){var n=e-t;return n?us(t,n):Er(isNaN(t)?e:t)}const Wn=(function t(e){var n=fs(e);function r(i,a){var s=n((i=mn(i)).r,(a=mn(a)).r),o=n(i.g,a.g),c=n(i.b,a.b),l=Tr(i.opacity,a.opacity);return function(u){return i.r=s(u),i.g=o(u),i.b=c(u),i.opacity=l(u),i+""}}return r.gamma=t,r})(1);function Wt(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}var xn=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,fn=new RegExp(xn.source,"g");function hs(t){return function(){return t}}function ds(t){return function(e){return t(e)+""}}function vs(t,e){var n=xn.lastIndex=fn.lastIndex=0,r,i,a,s=-1,o=[],c=[];for(t=t+"",e=e+"";(r=xn.exec(t))&&(i=fn.exec(e));)(a=i.index)>n&&(a=e.slice(n,a),o[s]?o[s]+=a:o[++s]=a),(r=r[0])===(i=i[0])?o[s]?o[s]+=i:o[++s]=i:(o[++s]=null,c.push({i:s,x:Wt(r,i)})),n=fn.lastIndex;return n<e.length&&(a=e.slice(n),o[s]?o[s]+=a:o[++s]=a),o.length<2?c[0]?ds(c[0].x):hs(e):(e=c.length,function(l){for(var u=0,y;u<e;++u)o[(y=c[u]).i]=y.x(l);return o.join("")})}var Un=180/Math.PI,wn={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Sr(t,e,n,r,i,a){var s,o,c;return(s=Math.sqrt(t*t+e*e))&&(t/=s,e/=s),(c=t*n+e*r)&&(n-=t*c,r-=e*c),(o=Math.sqrt(n*n+r*r))&&(n/=o,r/=o,c/=o),t*r<e*n&&(t=-t,e=-e,c=-c,s=-s),{translateX:i,translateY:a,rotate:Math.atan2(e,t)*Un,skewX:Math.atan(c)*Un,scaleX:s,scaleY:o}}var Re;function gs(t){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?wn:Sr(e.a,e.b,e.c,e.d,e.e,e.f)}function ps(t){return t==null||(Re||(Re=document.createElementNS("http://www.w3.org/2000/svg","g")),Re.setAttribute("transform",t),!(t=Re.transform.baseVal.consolidate()))?wn:(t=t.matrix,Sr(t.a,t.b,t.c,t.d,t.e,t.f))}function zr(t,e,n,r){function i(l){return l.length?l.pop()+" ":""}function a(l,u,y,f,h,w){if(l!==y||u!==f){var m=h.push("translate(",null,e,null,n);w.push({i:m-4,x:Wt(l,y)},{i:m-2,x:Wt(u,f)})}else(y||f)&&h.push("translate("+y+e+f+n)}function s(l,u,y,f){l!==u?(l-u>180?u+=360:u-l>180&&(l+=360),f.push({i:y.push(i(y)+"rotate(",null,r)-2,x:Wt(l,u)})):u&&y.push(i(y)+"rotate("+u+r)}function o(l,u,y,f){l!==u?f.push({i:y.push(i(y)+"skewX(",null,r)-2,x:Wt(l,u)}):u&&y.push(i(y)+"skewX("+u+r)}function c(l,u,y,f,h,w){if(l!==y||u!==f){var m=h.push(i(h)+"scale(",null,",",null,")");w.push({i:m-4,x:Wt(l,y)},{i:m-2,x:Wt(u,f)})}else(y!==1||f!==1)&&h.push(i(h)+"scale("+y+","+f+")")}return function(l,u){var y=[],f=[];return l=t(l),u=t(u),a(l.translateX,l.translateY,u.translateX,u.translateY,y,f),s(l.rotate,u.rotate,y,f),o(l.skewX,u.skewX,y,f),c(l.scaleX,l.scaleY,u.scaleX,u.scaleY,y,f),l=u=null,function(h){for(var w=-1,m=f.length,p;++w<m;)y[(p=f[w]).i]=p.x(h);return y.join("")}}}var ys=zr(gs,"px, ","px)","deg)"),_s=zr(ps,", ",")",")"),ms=1e-12;function Kn(t){return((t=Math.exp(t))+1/t)/2}function xs(t){return((t=Math.exp(t))-1/t)/2}function ws(t){return((t=Math.exp(2*t))-1)/(t+1)}const bs=(function t(e,n,r){function i(a,s){var o=a[0],c=a[1],l=a[2],u=s[0],y=s[1],f=s[2],h=u-o,w=y-c,m=h*h+w*w,p,_;if(m<ms)_=Math.log(f/l)/e,p=function(P){return[o+P*h,c+P*w,l*Math.exp(e*P*_)]};else{var b=Math.sqrt(m),T=(f*f-l*l+r*m)/(2*l*n*b),d=(f*f-l*l-r*m)/(2*f*n*b),A=Math.log(Math.sqrt(T*T+1)-T),C=Math.log(Math.sqrt(d*d+1)-d);_=(C-A)/e,p=function(P){var B=P*_,K=Kn(A),j=l/(n*b)*(K*ws(e*B+A)-xs(A));return[o+j*h,c+j*w,l*K/Kn(e*B+A)]}}return p.duration=_*1e3*e/Math.SQRT2,p}return i.rho=function(a){var s=Math.max(.001,+a),o=s*s,c=o*o;return t(s,o,c)},i})(Math.SQRT2,2,4);var ue=0,ve=0,fe=0,Cr=1e3,Ge,ge,We=0,te=0,Je=0,we=typeof performance=="object"&&performance.now?performance:Date,Ir=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function En(){return te||(Ir($s),te=we.now()+Je)}function $s(){te=0}function Ue(){this._call=this._time=this._next=null}Ue.prototype=Tn.prototype={constructor:Ue,restart:function(t,e,n){if(typeof t!="function")throw new TypeError("callback is not a function");n=(n==null?En():+n)+(e==null?0:+e),!this._next&&ge!==this&&(ge?ge._next=this:Ge=this,ge=this),this._call=t,this._time=n,bn()},stop:function(){this._call&&(this._call=null,this._time=1/0,bn())}};function Tn(t,e,n){var r=new Ue;return r.restart(t,e,n),r}function ks(){En(),++ue;for(var t=Ge,e;t;)(e=te-t._time)>=0&&t._call.call(void 0,e),t=t._next;--ue}function Qn(){te=(We=we.now())+Je,ue=ve=0;try{ks()}finally{ue=0,Ms(),te=0}}function Ns(){var t=we.now(),e=t-We;e>Cr&&(Je-=e,We=t)}function Ms(){for(var t,e=Ge,n,r=1/0;e;)e._call?(r>e._time&&(r=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:Ge=n);ge=t,bn(r)}function bn(t){if(!ue){ve&&(ve=clearTimeout(ve));var e=t-te;e>24?(t<1/0&&(ve=setTimeout(Qn,t-we.now()-Je)),fe&&(fe=clearInterval(fe))):(fe||(We=we.now(),fe=setInterval(Ns,Cr)),ue=1,Ir(Qn))}}function Zn(t,e,n){var r=new Ue;return e=e==null?0:+e,r.restart(i=>{r.stop(),t(i+e)},e,n),r}var As=Ne("start","end","cancel","interrupt"),Es=[],Rr=0,Jn=1,$n=2,qe=3,tr=4,kn=5,Oe=6;function tn(t,e,n,r,i,a){var s=t.__transition;if(!s)t.__transition={};else if(n in s)return;Ts(t,n,{name:e,index:r,group:i,on:As,tween:Es,time:a.time,delay:a.delay,duration:a.duration,ease:a.ease,timer:null,state:Rr})}function Sn(t,e){var n=zt(t,e);if(n.state>Rr)throw new Error("too late; already scheduled");return n}function Yt(t,e){var n=zt(t,e);if(n.state>qe)throw new Error("too late; already running");return n}function zt(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function Ts(t,e,n){var r=t.__transition,i;r[e]=n,n.timer=Tn(a,0,n.time);function a(l){n.state=Jn,n.timer.restart(s,n.delay,n.time),n.delay<=l&&s(l-n.delay)}function s(l){var u,y,f,h;if(n.state!==Jn)return c();for(u in r)if(h=r[u],h.name===n.name){if(h.state===qe)return Zn(s);h.state===tr?(h.state=Oe,h.timer.stop(),h.on.call("interrupt",t,t.__data__,h.index,h.group),delete r[u]):+u<e&&(h.state=Oe,h.timer.stop(),h.on.call("cancel",t,t.__data__,h.index,h.group),delete r[u])}if(Zn(function(){n.state===qe&&(n.state=tr,n.timer.restart(o,n.delay,n.time),o(l))}),n.state=$n,n.on.call("start",t,t.__data__,n.index,n.group),n.state===$n){for(n.state=qe,i=new Array(f=n.tween.length),u=0,y=-1;u<f;++u)(h=n.tween[u].value.call(t,t.__data__,n.index,n.group))&&(i[++y]=h);i.length=y+1}}function o(l){for(var u=l<n.duration?n.ease.call(null,l/n.duration):(n.timer.restart(c),n.state=kn,1),y=-1,f=i.length;++y<f;)i[y].call(t,u);n.state===kn&&(n.on.call("end",t,t.__data__,n.index,n.group),c())}function c(){n.state=Oe,n.timer.stop(),delete r[e];for(var l in r)return;delete t.__transition}}function Xe(t,e){var n=t.__transition,r,i,a=!0,s;if(n){e=e==null?null:e+"";for(s in n){if((r=n[s]).name!==e){a=!1;continue}i=r.state>$n&&r.state<kn,r.state=Oe,r.timer.stop(),r.on.call(i?"interrupt":"cancel",t,t.__data__,r.index,r.group),delete n[s]}a&&delete t.__transition}}function Ss(t){return this.each(function(){Xe(this,t)})}function zs(t,e){var n,r;return function(){var i=Yt(this,t),a=i.tween;if(a!==n){r=n=a;for(var s=0,o=r.length;s<o;++s)if(r[s].name===e){r=r.slice(),r.splice(s,1);break}}i.tween=r}}function Cs(t,e,n){var r,i;if(typeof n!="function")throw new Error;return function(){var a=Yt(this,t),s=a.tween;if(s!==r){i=(r=s).slice();for(var o={name:e,value:n},c=0,l=i.length;c<l;++c)if(i[c].name===e){i[c]=o;break}c===l&&i.push(o)}a.tween=i}}function Is(t,e){var n=this._id;if(t+="",arguments.length<2){for(var r=zt(this.node(),n).tween,i=0,a=r.length,s;i<a;++i)if((s=r[i]).name===t)return s.value;return null}return this.each((e==null?zs:Cs)(n,t,e))}function zn(t,e,n){var r=t._id;return t.each(function(){var i=Yt(this,r);(i.value||(i.value={}))[e]=n.apply(this,arguments)}),function(i){return zt(i,r).value[e]}}function Dr(t,e){var n;return(typeof e=="number"?Wt:e instanceof xe?Wn:(n=xe(e))?(e=n,Wn):vs)(t,e)}function Rs(t){return function(){this.removeAttribute(t)}}function Ds(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Ps(t,e,n){var r,i=n+"",a;return function(){var s=this.getAttribute(t);return s===i?null:s===r?a:a=e(r=s,n)}}function Ys(t,e,n){var r,i=n+"",a;return function(){var s=this.getAttributeNS(t.space,t.local);return s===i?null:s===r?a:a=e(r=s,n)}}function qs(t,e,n){var r,i,a;return function(){var s,o=n(this),c;return o==null?void this.removeAttribute(t):(s=this.getAttribute(t),c=o+"",s===c?null:s===r&&c===i?a:(i=c,a=e(r=s,o)))}}function Os(t,e,n){var r,i,a;return function(){var s,o=n(this),c;return o==null?void this.removeAttributeNS(t.space,t.local):(s=this.getAttributeNS(t.space,t.local),c=o+"",s===c?null:s===r&&c===i?a:(i=c,a=e(r=s,o)))}}function Xs(t,e){var n=Ze(t),r=n==="transform"?_s:Dr;return this.attrTween(t,typeof e=="function"?(n.local?Os:qs)(n,r,zn(this,"attr."+t,e)):e==null?(n.local?Ds:Rs)(n):(n.local?Ys:Ps)(n,r,e))}function Fs(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}function Bs(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}function Ls(t,e){var n,r;function i(){var a=e.apply(this,arguments);return a!==r&&(n=(r=a)&&Bs(t,a)),n}return i._value=e,i}function Hs(t,e){var n,r;function i(){var a=e.apply(this,arguments);return a!==r&&(n=(r=a)&&Fs(t,a)),n}return i._value=e,i}function Vs(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;var r=Ze(t);return this.tween(n,(r.local?Ls:Hs)(r,e))}function js(t,e){return function(){Sn(this,t).delay=+e.apply(this,arguments)}}function Gs(t,e){return e=+e,function(){Sn(this,t).delay=e}}function Ws(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?js:Gs)(e,t)):zt(this.node(),e).delay}function Us(t,e){return function(){Yt(this,t).duration=+e.apply(this,arguments)}}function Ks(t,e){return e=+e,function(){Yt(this,t).duration=e}}function Qs(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?Us:Ks)(e,t)):zt(this.node(),e).duration}function Zs(t,e){if(typeof e!="function")throw new Error;return function(){Yt(this,t).ease=e}}function Js(t){var e=this._id;return arguments.length?this.each(Zs(e,t)):zt(this.node(),e).ease}function to(t,e){return function(){var n=e.apply(this,arguments);if(typeof n!="function")throw new Error;Yt(this,t).ease=n}}function eo(t){if(typeof t!="function")throw new Error;return this.each(to(this._id,t))}function no(t){typeof t!="function"&&(t=vr(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var a=e[i],s=a.length,o=r[i]=[],c,l=0;l<s;++l)(c=a[l])&&t.call(c,c.__data__,l,a)&&o.push(c);return new Ht(r,this._parents,this._name,this._id)}function ro(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,r=e.length,i=n.length,a=Math.min(r,i),s=new Array(r),o=0;o<a;++o)for(var c=e[o],l=n[o],u=c.length,y=s[o]=new Array(u),f,h=0;h<u;++h)(f=c[h]||l[h])&&(y[h]=f);for(;o<r;++o)s[o]=e[o];return new Ht(s,this._parents,this._name,this._id)}function io(t){return(t+"").trim().split(/^|\s+/).every(function(e){var n=e.indexOf(".");return n>=0&&(e=e.slice(0,n)),!e||e==="start"})}function ao(t,e,n){var r,i,a=io(e)?Sn:Yt;return function(){var s=a(this,t),o=s.on;o!==r&&(i=(r=o).copy()).on(e,n),s.on=i}}function so(t,e){var n=this._id;return arguments.length<2?zt(this.node(),n).on.on(t):this.each(ao(n,t,e))}function oo(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}function lo(){return this.on("end.remove",oo(this._id))}function uo(t){var e=this._name,n=this._id;typeof t!="function"&&(t=Nn(t));for(var r=this._groups,i=r.length,a=new Array(i),s=0;s<i;++s)for(var o=r[s],c=o.length,l=a[s]=new Array(c),u,y,f=0;f<c;++f)(u=o[f])&&(y=t.call(u,u.__data__,f,o))&&("__data__"in u&&(y.__data__=u.__data__),l[f]=y,tn(l[f],e,n,f,l,zt(u,n)));return new Ht(a,this._parents,e,n)}function co(t){var e=this._name,n=this._id;typeof t!="function"&&(t=dr(t));for(var r=this._groups,i=r.length,a=[],s=[],o=0;o<i;++o)for(var c=r[o],l=c.length,u,y=0;y<l;++y)if(u=c[y]){for(var f=t.call(u,u.__data__,y,c),h,w=zt(u,n),m=0,p=f.length;m<p;++m)(h=f[m])&&tn(h,e,n,m,f,w);a.push(f),s.push(u)}return new Ht(a,s,e,n)}var fo=Me.prototype.constructor;function ho(){return new fo(this._groups,this._parents)}function vo(t,e){var n,r,i;return function(){var a=le(this,t),s=(this.style.removeProperty(t),le(this,t));return a===s?null:a===n&&s===r?i:i=e(n=a,r=s)}}function Pr(t){return function(){this.style.removeProperty(t)}}function go(t,e,n){var r,i=n+"",a;return function(){var s=le(this,t);return s===i?null:s===r?a:a=e(r=s,n)}}function po(t,e,n){var r,i,a;return function(){var s=le(this,t),o=n(this),c=o+"";return o==null&&(c=o=(this.style.removeProperty(t),le(this,t))),s===c?null:s===r&&c===i?a:(i=c,a=e(r=s,o))}}function yo(t,e){var n,r,i,a="style."+e,s="end."+a,o;return function(){var c=Yt(this,t),l=c.on,u=c.value[a]==null?o||(o=Pr(e)):void 0;(l!==n||i!==u)&&(r=(n=l).copy()).on(s,i=u),c.on=r}}function _o(t,e,n){var r=(t+="")=="transform"?ys:Dr;return e==null?this.styleTween(t,vo(t,r)).on("end.style."+t,Pr(t)):typeof e=="function"?this.styleTween(t,po(t,r,zn(this,"style."+t,e))).each(yo(this._id,t)):this.styleTween(t,go(t,r,e),n).on("end.style."+t,null)}function mo(t,e,n){return function(r){this.style.setProperty(t,e.call(this,r),n)}}function xo(t,e,n){var r,i;function a(){var s=e.apply(this,arguments);return s!==i&&(r=(i=s)&&mo(t,s,n)),r}return a._value=e,a}function wo(t,e,n){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(e==null)return this.tween(r,null);if(typeof e!="function")throw new Error;return this.tween(r,xo(t,e,n??""))}function bo(t){return function(){this.textContent=t}}function $o(t){return function(){var e=t(this);this.textContent=e??""}}function ko(t){return this.tween("text",typeof t=="function"?$o(zn(this,"text",t)):bo(t==null?"":t+""))}function No(t){return function(e){this.textContent=t.call(this,e)}}function Mo(t){var e,n;function r(){var i=t.apply(this,arguments);return i!==n&&(e=(n=i)&&No(i)),e}return r._value=t,r}function Ao(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;return this.tween(e,Mo(t))}function Eo(){for(var t=this._name,e=this._id,n=Yr(),r=this._groups,i=r.length,a=0;a<i;++a)for(var s=r[a],o=s.length,c,l=0;l<o;++l)if(c=s[l]){var u=zt(c,e);tn(c,t,n,l,s,{time:u.time+u.delay+u.duration,delay:0,duration:u.duration,ease:u.ease})}return new Ht(r,this._parents,t,n)}function To(){var t,e,n=this,r=n._id,i=n.size();return new Promise(function(a,s){var o={value:s},c={value:function(){--i===0&&a()}};n.each(function(){var l=Yt(this,r),u=l.on;u!==t&&(e=(t=u).copy(),e._.cancel.push(o),e._.interrupt.push(o),e._.end.push(c)),l.on=e}),i===0&&a()})}var So=0;function Ht(t,e,n,r){this._groups=t,this._parents=e,this._name=n,this._id=r}function Yr(){return++So}var Ot=Me.prototype;Ht.prototype={constructor:Ht,select:uo,selectAll:co,selectChild:Ot.selectChild,selectChildren:Ot.selectChildren,filter:no,merge:ro,selection:ho,transition:Eo,call:Ot.call,nodes:Ot.nodes,node:Ot.node,size:Ot.size,empty:Ot.empty,each:Ot.each,on:so,attr:Xs,attrTween:Vs,style:_o,styleTween:wo,text:ko,textTween:Ao,remove:lo,tween:Is,delay:Ws,duration:Qs,ease:Js,easeVarying:eo,end:To,[Symbol.iterator]:Ot[Symbol.iterator]};function zo(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var Co={time:null,delay:0,duration:250,ease:zo};function Io(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}function Ro(t){var e,n;t instanceof Ht?(e=t._id,t=t._name):(e=Yr(),(n=Co).time=En(),t=t==null?null:t+"");for(var r=this._groups,i=r.length,a=0;a<i;++a)for(var s=r[a],o=s.length,c,l=0;l<o;++l)(c=s[l])&&tn(c,t,e,l,s,n||Io(c,e));return new Ht(r,this._parents,t,e)}Me.prototype.interrupt=Ss;Me.prototype.transition=Ro;function er(t,e){var n,r=1;t==null&&(t=0),e==null&&(e=0);function i(){var a,s=n.length,o,c=0,l=0;for(a=0;a<s;++a)o=n[a],c+=o.x,l+=o.y;for(c=(c/s-t)*r,l=(l/s-e)*r,a=0;a<s;++a)o=n[a],o.x-=c,o.y-=l}return i.initialize=function(a){n=a},i.x=function(a){return arguments.length?(t=+a,i):t},i.y=function(a){return arguments.length?(e=+a,i):e},i.strength=function(a){return arguments.length?(r=+a,i):r},i}function Do(t){const e=+this._x.call(null,t),n=+this._y.call(null,t);return qr(this.cover(e,n),e,n,t)}function qr(t,e,n,r){if(isNaN(e)||isNaN(n))return t;var i,a=t._root,s={data:r},o=t._x0,c=t._y0,l=t._x1,u=t._y1,y,f,h,w,m,p,_,b;if(!a)return t._root=s,t;for(;a.length;)if((m=e>=(y=(o+l)/2))?o=y:l=y,(p=n>=(f=(c+u)/2))?c=f:u=f,i=a,!(a=a[_=p<<1|m]))return i[_]=s,t;if(h=+t._x.call(null,a.data),w=+t._y.call(null,a.data),e===h&&n===w)return s.next=a,i?i[_]=s:t._root=s,t;do i=i?i[_]=new Array(4):t._root=new Array(4),(m=e>=(y=(o+l)/2))?o=y:l=y,(p=n>=(f=(c+u)/2))?c=f:u=f;while((_=p<<1|m)===(b=(w>=f)<<1|h>=y));return i[b]=a,i[_]=s,t}function Po(t){var e,n,r=t.length,i,a,s=new Array(r),o=new Array(r),c=1/0,l=1/0,u=-1/0,y=-1/0;for(n=0;n<r;++n)isNaN(i=+this._x.call(null,e=t[n]))||isNaN(a=+this._y.call(null,e))||(s[n]=i,o[n]=a,i<c&&(c=i),i>u&&(u=i),a<l&&(l=a),a>y&&(y=a));if(c>u||l>y)return this;for(this.cover(c,l).cover(u,y),n=0;n<r;++n)qr(this,s[n],o[n],t[n]);return this}function Yo(t,e){if(isNaN(t=+t)||isNaN(e=+e))return this;var n=this._x0,r=this._y0,i=this._x1,a=this._y1;if(isNaN(n))i=(n=Math.floor(t))+1,a=(r=Math.floor(e))+1;else{for(var s=i-n||1,o=this._root,c,l;n>t||t>=i||r>e||e>=a;)switch(l=(e<r)<<1|t<n,c=new Array(4),c[l]=o,o=c,s*=2,l){case 0:i=n+s,a=r+s;break;case 1:n=i-s,a=r+s;break;case 2:i=n+s,r=a-s;break;case 3:n=i-s,r=a-s;break}this._root&&this._root.length&&(this._root=o)}return this._x0=n,this._y0=r,this._x1=i,this._y1=a,this}function qo(){var t=[];return this.visit(function(e){if(!e.length)do t.push(e.data);while(e=e.next)}),t}function Oo(t){return arguments.length?this.cover(+t[0][0],+t[0][1]).cover(+t[1][0],+t[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function vt(t,e,n,r,i){this.node=t,this.x0=e,this.y0=n,this.x1=r,this.y1=i}function Xo(t,e,n){var r,i=this._x0,a=this._y0,s,o,c,l,u=this._x1,y=this._y1,f=[],h=this._root,w,m;for(h&&f.push(new vt(h,i,a,u,y)),n==null?n=1/0:(i=t-n,a=e-n,u=t+n,y=e+n,n*=n);w=f.pop();)if(!(!(h=w.node)||(s=w.x0)>u||(o=w.y0)>y||(c=w.x1)<i||(l=w.y1)<a))if(h.length){var p=(s+c)/2,_=(o+l)/2;f.push(new vt(h[3],p,_,c,l),new vt(h[2],s,_,p,l),new vt(h[1],p,o,c,_),new vt(h[0],s,o,p,_)),(m=(e>=_)<<1|t>=p)&&(w=f[f.length-1],f[f.length-1]=f[f.length-1-m],f[f.length-1-m]=w)}else{var b=t-+this._x.call(null,h.data),T=e-+this._y.call(null,h.data),d=b*b+T*T;if(d<n){var A=Math.sqrt(n=d);i=t-A,a=e-A,u=t+A,y=e+A,r=h.data}}return r}function Fo(t){if(isNaN(u=+this._x.call(null,t))||isNaN(y=+this._y.call(null,t)))return this;var e,n=this._root,r,i,a,s=this._x0,o=this._y0,c=this._x1,l=this._y1,u,y,f,h,w,m,p,_;if(!n)return this;if(n.length)for(;;){if((w=u>=(f=(s+c)/2))?s=f:c=f,(m=y>=(h=(o+l)/2))?o=h:l=h,e=n,!(n=n[p=m<<1|w]))return this;if(!n.length)break;(e[p+1&3]||e[p+2&3]||e[p+3&3])&&(r=e,_=p)}for(;n.data!==t;)if(i=n,!(n=n.next))return this;return(a=n.next)&&delete n.next,i?(a?i.next=a:delete i.next,this):e?(a?e[p]=a:delete e[p],(n=e[0]||e[1]||e[2]||e[3])&&n===(e[3]||e[2]||e[1]||e[0])&&!n.length&&(r?r[_]=n:this._root=n),this):(this._root=a,this)}function Bo(t){for(var e=0,n=t.length;e<n;++e)this.remove(t[e]);return this}function Lo(){return this._root}function Ho(){var t=0;return this.visit(function(e){if(!e.length)do++t;while(e=e.next)}),t}function Vo(t){var e=[],n,r=this._root,i,a,s,o,c;for(r&&e.push(new vt(r,this._x0,this._y0,this._x1,this._y1));n=e.pop();)if(!t(r=n.node,a=n.x0,s=n.y0,o=n.x1,c=n.y1)&&r.length){var l=(a+o)/2,u=(s+c)/2;(i=r[3])&&e.push(new vt(i,l,u,o,c)),(i=r[2])&&e.push(new vt(i,a,u,l,c)),(i=r[1])&&e.push(new vt(i,l,s,o,u)),(i=r[0])&&e.push(new vt(i,a,s,l,u))}return this}function jo(t){var e=[],n=[],r;for(this._root&&e.push(new vt(this._root,this._x0,this._y0,this._x1,this._y1));r=e.pop();){var i=r.node;if(i.length){var a,s=r.x0,o=r.y0,c=r.x1,l=r.y1,u=(s+c)/2,y=(o+l)/2;(a=i[0])&&e.push(new vt(a,s,o,u,y)),(a=i[1])&&e.push(new vt(a,u,o,c,y)),(a=i[2])&&e.push(new vt(a,s,y,u,l)),(a=i[3])&&e.push(new vt(a,u,y,c,l))}n.push(r)}for(;r=n.pop();)t(r.node,r.x0,r.y0,r.x1,r.y1);return this}function Go(t){return t[0]}function Wo(t){return arguments.length?(this._x=t,this):this._x}function Uo(t){return t[1]}function Ko(t){return arguments.length?(this._y=t,this):this._y}function Cn(t,e,n){var r=new In(e??Go,n??Uo,NaN,NaN,NaN,NaN);return t==null?r:r.addAll(t)}function In(t,e,n,r,i,a){this._x=t,this._y=e,this._x0=n,this._y0=r,this._x1=i,this._y1=a,this._root=void 0}function nr(t){for(var e={data:t.data},n=e;t=t.next;)n=n.next={data:t.data};return e}var pt=Cn.prototype=In.prototype;pt.copy=function(){var t=new In(this._x,this._y,this._x0,this._y0,this._x1,this._y1),e=this._root,n,r;if(!e)return t;if(!e.length)return t._root=nr(e),t;for(n=[{source:e,target:t._root=new Array(4)}];e=n.pop();)for(var i=0;i<4;++i)(r=e.source[i])&&(r.length?n.push({source:r,target:e.target[i]=new Array(4)}):e.target[i]=nr(r));return t};pt.add=Do;pt.addAll=Po;pt.cover=Yo;pt.data=qo;pt.extent=Oo;pt.find=Xo;pt.remove=Fo;pt.removeAll=Bo;pt.root=Lo;pt.size=Ho;pt.visit=Vo;pt.visitAfter=jo;pt.x=Wo;pt.y=Ko;function gt(t){return function(){return t}}function Kt(t){return(t()-.5)*1e-6}function Qo(t){return t.x+t.vx}function Zo(t){return t.y+t.vy}function Jo(t){var e,n,r,i=1,a=1;typeof t!="function"&&(t=gt(t==null?1:+t));function s(){for(var l,u=e.length,y,f,h,w,m,p,_=0;_<a;++_)for(y=Cn(e,Qo,Zo).visitAfter(o),l=0;l<u;++l)f=e[l],m=n[f.index],p=m*m,h=f.x+f.vx,w=f.y+f.vy,y.visit(b);function b(T,d,A,C,P){var B=T.data,K=T.r,j=m+K;if(B){if(B.index>f.index){var tt=h-B.x-B.vx,rt=w-B.y-B.vy,lt=tt*tt+rt*rt;lt<j*j&&(tt===0&&(tt=Kt(r),lt+=tt*tt),rt===0&&(rt=Kt(r),lt+=rt*rt),lt=(j-(lt=Math.sqrt(lt)))/lt*i,f.vx+=(tt*=lt)*(j=(K*=K)/(p+K)),f.vy+=(rt*=lt)*j,B.vx-=tt*(j=1-j),B.vy-=rt*j)}return}return d>h+j||C<h-j||A>w+j||P<w-j}}function o(l){if(l.data)return l.r=n[l.data.index];for(var u=l.r=0;u<4;++u)l[u]&&l[u].r>l.r&&(l.r=l[u].r)}function c(){if(e){var l,u=e.length,y;for(n=new Array(u),l=0;l<u;++l)y=e[l],n[y.index]=+t(y,l,e)}}return s.initialize=function(l,u){e=l,r=u,c()},s.iterations=function(l){return arguments.length?(a=+l,s):a},s.strength=function(l){return arguments.length?(i=+l,s):i},s.radius=function(l){return arguments.length?(t=typeof l=="function"?l:gt(+l),c(),s):t},s}function tl(t){return t.index}function rr(t,e){var n=t.get(e);if(!n)throw new Error("node not found: "+e);return n}function el(t){var e=tl,n=y,r,i=gt(30),a,s,o,c,l,u=1;t==null&&(t=[]);function y(p){return 1/Math.min(o[p.source.index],o[p.target.index])}function f(p){for(var _=0,b=t.length;_<u;++_)for(var T=0,d,A,C,P,B,K,j;T<b;++T)d=t[T],A=d.source,C=d.target,P=C.x+C.vx-A.x-A.vx||Kt(l),B=C.y+C.vy-A.y-A.vy||Kt(l),K=Math.sqrt(P*P+B*B),K=(K-a[T])/K*p*r[T],P*=K,B*=K,C.vx-=P*(j=c[T]),C.vy-=B*j,A.vx+=P*(j=1-j),A.vy+=B*j}function h(){if(s){var p,_=s.length,b=t.length,T=new Map(s.map((A,C)=>[e(A,C,s),A])),d;for(p=0,o=new Array(_);p<b;++p)d=t[p],d.index=p,typeof d.source!="object"&&(d.source=rr(T,d.source)),typeof d.target!="object"&&(d.target=rr(T,d.target)),o[d.source.index]=(o[d.source.index]||0)+1,o[d.target.index]=(o[d.target.index]||0)+1;for(p=0,c=new Array(b);p<b;++p)d=t[p],c[p]=o[d.source.index]/(o[d.source.index]+o[d.target.index]);r=new Array(b),w(),a=new Array(b),m()}}function w(){if(s)for(var p=0,_=t.length;p<_;++p)r[p]=+n(t[p],p,t)}function m(){if(s)for(var p=0,_=t.length;p<_;++p)a[p]=+i(t[p],p,t)}return f.initialize=function(p,_){s=p,l=_,h()},f.links=function(p){return arguments.length?(t=p,h(),f):t},f.id=function(p){return arguments.length?(e=p,f):e},f.iterations=function(p){return arguments.length?(u=+p,f):u},f.strength=function(p){return arguments.length?(n=typeof p=="function"?p:gt(+p),w(),f):n},f.distance=function(p){return arguments.length?(i=typeof p=="function"?p:gt(+p),m(),f):i},f}const nl=1664525,rl=1013904223,ir=4294967296;function il(){let t=1;return()=>(t=(nl*t+rl)%ir)/ir}function al(t){return t.x}function sl(t){return t.y}var ol=10,ll=Math.PI*(3-Math.sqrt(5));function ul(t){var e,n=1,r=.001,i=1-Math.pow(r,1/300),a=0,s=.6,o=new Map,c=Tn(y),l=Ne("tick","end"),u=il();t==null&&(t=[]);function y(){f(),l.call("tick",e),n<r&&(c.stop(),l.call("end",e))}function f(m){var p,_=t.length,b;m===void 0&&(m=1);for(var T=0;T<m;++T)for(n+=(a-n)*i,o.forEach(function(d){d(n)}),p=0;p<_;++p)b=t[p],b.fx==null?b.x+=b.vx*=s:(b.x=b.fx,b.vx=0),b.fy==null?b.y+=b.vy*=s:(b.y=b.fy,b.vy=0);return e}function h(){for(var m=0,p=t.length,_;m<p;++m){if(_=t[m],_.index=m,_.fx!=null&&(_.x=_.fx),_.fy!=null&&(_.y=_.fy),isNaN(_.x)||isNaN(_.y)){var b=ol*Math.sqrt(.5+m),T=m*ll;_.x=b*Math.cos(T),_.y=b*Math.sin(T)}(isNaN(_.vx)||isNaN(_.vy))&&(_.vx=_.vy=0)}}function w(m){return m.initialize&&m.initialize(t,u),m}return h(),e={tick:f,restart:function(){return c.restart(y),e},stop:function(){return c.stop(),e},nodes:function(m){return arguments.length?(t=m,h(),o.forEach(w),e):t},alpha:function(m){return arguments.length?(n=+m,e):n},alphaMin:function(m){return arguments.length?(r=+m,e):r},alphaDecay:function(m){return arguments.length?(i=+m,e):+i},alphaTarget:function(m){return arguments.length?(a=+m,e):a},velocityDecay:function(m){return arguments.length?(s=1-m,e):1-s},randomSource:function(m){return arguments.length?(u=m,o.forEach(w),e):u},force:function(m,p){return arguments.length>1?(p==null?o.delete(m):o.set(m,w(p)),e):o.get(m)},find:function(m,p,_){var b=0,T=t.length,d,A,C,P,B;for(_==null?_=1/0:_*=_,b=0;b<T;++b)P=t[b],d=m-P.x,A=p-P.y,C=d*d+A*A,C<_&&(B=P,_=C);return B},on:function(m,p){return arguments.length>1?(l.on(m,p),e):l.on(m)}}}function cl(){var t,e,n,r,i=gt(-30),a,s=1,o=1/0,c=.81;function l(h){var w,m=t.length,p=Cn(t,al,sl).visitAfter(y);for(r=h,w=0;w<m;++w)e=t[w],p.visit(f)}function u(){if(t){var h,w=t.length,m;for(a=new Array(w),h=0;h<w;++h)m=t[h],a[m.index]=+i(m,h,t)}}function y(h){var w=0,m,p,_=0,b,T,d;if(h.length){for(b=T=d=0;d<4;++d)(m=h[d])&&(p=Math.abs(m.value))&&(w+=m.value,_+=p,b+=p*m.x,T+=p*m.y);h.x=b/_,h.y=T/_}else{m=h,m.x=m.data.x,m.y=m.data.y;do w+=a[m.data.index];while(m=m.next)}h.value=w}function f(h,w,m,p){if(!h.value)return!0;var _=h.x-e.x,b=h.y-e.y,T=p-w,d=_*_+b*b;if(T*T/c<d)return d<o&&(_===0&&(_=Kt(n),d+=_*_),b===0&&(b=Kt(n),d+=b*b),d<s&&(d=Math.sqrt(s*d)),e.vx+=_*h.value*r/d,e.vy+=b*h.value*r/d),!0;if(h.length||d>=o)return;(h.data!==e||h.next)&&(_===0&&(_=Kt(n),d+=_*_),b===0&&(b=Kt(n),d+=b*b),d<s&&(d=Math.sqrt(s*d)));do h.data!==e&&(T=a[h.data.index]*r/d,e.vx+=_*T,e.vy+=b*T);while(h=h.next)}return l.initialize=function(h,w){t=h,n=w,u()},l.strength=function(h){return arguments.length?(i=typeof h=="function"?h:gt(+h),u(),l):i},l.distanceMin=function(h){return arguments.length?(s=h*h,l):Math.sqrt(s)},l.distanceMax=function(h){return arguments.length?(o=h*h,l):Math.sqrt(o)},l.theta=function(h){return arguments.length?(c=h*h,l):Math.sqrt(c)},l}function ar(t){var e=gt(.1),n,r,i;typeof t!="function"&&(t=gt(t==null?0:+t));function a(o){for(var c=0,l=n.length,u;c<l;++c)u=n[c],u.vx+=(i[c]-u.x)*r[c]*o}function s(){if(n){var o,c=n.length;for(r=new Array(c),i=new Array(c),o=0;o<c;++o)r[o]=isNaN(i[o]=+t(n[o],o,n))?0:+e(n[o],o,n)}}return a.initialize=function(o){n=o,s()},a.strength=function(o){return arguments.length?(e=typeof o=="function"?o:gt(+o),s(),a):e},a.x=function(o){return arguments.length?(t=typeof o=="function"?o:gt(+o),s(),a):t},a}function sr(t){var e=gt(.1),n,r,i;typeof t!="function"&&(t=gt(t==null?0:+t));function a(o){for(var c=0,l=n.length,u;c<l;++c)u=n[c],u.vy+=(i[c]-u.y)*r[c]*o}function s(){if(n){var o,c=n.length;for(r=new Array(c),i=new Array(c),o=0;o<c;++o)r[o]=isNaN(i[o]=+t(n[o],o,n))?0:+e(n[o],o,n)}}return a.initialize=function(o){n=o,s()},a.strength=function(o){return arguments.length?(e=typeof o=="function"?o:gt(+o),s(),a):e},a.y=function(o){return arguments.length?(t=typeof o=="function"?o:gt(+o),s(),a):t},a}const De=t=>()=>t;function fl(t,{sourceEvent:e,target:n,transform:r,dispatch:i}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:i}})}function Lt(t,e,n){this.k=t,this.x=e,this.y=n}Lt.prototype={constructor:Lt,scale:function(t){return t===1?this:new Lt(this.k*t,this.x,this.y)},translate:function(t,e){return t===0&e===0?this:new Lt(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var ie=new Lt(1,0,0);Lt.prototype;function hn(t){t.stopImmediatePropagation()}function he(t){t.preventDefault(),t.stopImmediatePropagation()}function hl(t){return(!t.ctrlKey||t.type==="wheel")&&!t.button}function dl(){var t=this;return t instanceof SVGElement?(t=t.ownerSVGElement||t,t.hasAttribute("viewBox")?(t=t.viewBox.baseVal,[[t.x,t.y],[t.x+t.width,t.y+t.height]]):[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]):[[0,0],[t.clientWidth,t.clientHeight]]}function or(){return this.__zoom||ie}function vl(t){return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*(t.ctrlKey?10:1)}function gl(){return navigator.maxTouchPoints||"ontouchstart"in this}function pl(t,e,n){var r=t.invertX(e[0][0])-n[0][0],i=t.invertX(e[1][0])-n[1][0],a=t.invertY(e[0][1])-n[0][1],s=t.invertY(e[1][1])-n[1][1];return t.translate(i>r?(r+i)/2:Math.min(0,r)||Math.max(0,i),s>a?(a+s)/2:Math.min(0,a)||Math.max(0,s))}function yl(){var t=hl,e=dl,n=pl,r=vl,i=gl,a=[0,1/0],s=[[-1/0,-1/0],[1/0,1/0]],o=250,c=bs,l=Ne("start","zoom","end"),u,y,f,h=500,w=150,m=0,p=10;function _(g){g.property("__zoom",or).on("wheel.zoom",B,{passive:!1}).on("mousedown.zoom",K).on("dblclick.zoom",j).filter(i).on("touchstart.zoom",tt).on("touchmove.zoom",rt).on("touchend.zoom touchcancel.zoom",lt).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}_.transform=function(g,S,x,k){var z=g.selection?g.selection():g;z.property("__zoom",or),g!==z?A(g,S,x,k):z.interrupt().each(function(){C(this,arguments).event(k).start().zoom(null,typeof S=="function"?S.apply(this,arguments):S).end()})},_.scaleBy=function(g,S,x,k){_.scaleTo(g,function(){var z=this.__zoom.k,I=typeof S=="function"?S.apply(this,arguments):S;return z*I},x,k)},_.scaleTo=function(g,S,x,k){_.transform(g,function(){var z=e.apply(this,arguments),I=this.__zoom,F=x==null?d(z):typeof x=="function"?x.apply(this,arguments):x,J=I.invert(F),it=typeof S=="function"?S.apply(this,arguments):S;return n(T(b(I,it),F,J),z,s)},x,k)},_.translateBy=function(g,S,x,k){_.transform(g,function(){return n(this.__zoom.translate(typeof S=="function"?S.apply(this,arguments):S,typeof x=="function"?x.apply(this,arguments):x),e.apply(this,arguments),s)},null,k)},_.translateTo=function(g,S,x,k,z){_.transform(g,function(){var I=e.apply(this,arguments),F=this.__zoom,J=k==null?d(I):typeof k=="function"?k.apply(this,arguments):k;return n(ie.translate(J[0],J[1]).scale(F.k).translate(typeof S=="function"?-S.apply(this,arguments):-S,typeof x=="function"?-x.apply(this,arguments):-x),I,s)},k,z)};function b(g,S){return S=Math.max(a[0],Math.min(a[1],S)),S===g.k?g:new Lt(S,g.x,g.y)}function T(g,S,x){var k=S[0]-x[0]*g.k,z=S[1]-x[1]*g.k;return k===g.x&&z===g.y?g:new Lt(g.k,k,z)}function d(g){return[(+g[0][0]+ +g[1][0])/2,(+g[0][1]+ +g[1][1])/2]}function A(g,S,x,k){g.on("start.zoom",function(){C(this,arguments).event(k).start()}).on("interrupt.zoom end.zoom",function(){C(this,arguments).event(k).end()}).tween("zoom",function(){var z=this,I=arguments,F=C(z,I).event(k),J=e.apply(z,I),it=x==null?d(J):typeof x=="function"?x.apply(z,I):x,L=Math.max(J[1][0]-J[0][0],J[1][1]-J[0][1]),q=z.__zoom,G=typeof S=="function"?S.apply(z,I):S,st=c(q.invert(it).concat(L/q.k),G.invert(it).concat(L/G.k));return function(U){if(U===1)U=G;else{var et=st(U),ft=L/et[2];U=new Lt(ft,it[0]-et[0]*ft,it[1]-et[1]*ft)}F.zoom(null,U)}})}function C(g,S,x){return!x&&g.__zooming||new P(g,S)}function P(g,S){this.that=g,this.args=S,this.active=0,this.sourceEvent=null,this.extent=e.apply(g,S),this.taps=0}P.prototype={event:function(g){return g&&(this.sourceEvent=g),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(g,S){return this.mouse&&g!=="mouse"&&(this.mouse[1]=S.invert(this.mouse[0])),this.touch0&&g!=="touch"&&(this.touch0[1]=S.invert(this.touch0[0])),this.touch1&&g!=="touch"&&(this.touch1[1]=S.invert(this.touch1[0])),this.that.__zoom=S,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(g){var S=xt(this.that).datum();l.call(g,this.that,new fl(g,{sourceEvent:this.sourceEvent,target:_,transform:this.that.__zoom,dispatch:l}),S)}};function B(g,...S){if(!t.apply(this,arguments))return;var x=C(this,S).event(g),k=this.__zoom,z=Math.max(a[0],Math.min(a[1],k.k*Math.pow(2,r.apply(this,arguments)))),I=Ft(g);if(x.wheel)(x.mouse[0][0]!==I[0]||x.mouse[0][1]!==I[1])&&(x.mouse[1]=k.invert(x.mouse[0]=I)),clearTimeout(x.wheel);else{if(k.k===z)return;x.mouse=[I,k.invert(I)],Xe(this),x.start()}he(g),x.wheel=setTimeout(F,w),x.zoom("mouse",n(T(b(k,z),x.mouse[0],x.mouse[1]),x.extent,s));function F(){x.wheel=null,x.end()}}function K(g,...S){if(f||!t.apply(this,arguments))return;var x=g.currentTarget,k=C(this,S,!0).event(g),z=xt(g.view).on("mousemove.zoom",it,!0).on("mouseup.zoom",L,!0),I=Ft(g,x),F=g.clientX,J=g.clientY;kr(g.view),hn(g),k.mouse=[I,this.__zoom.invert(I)],Xe(this),k.start();function it(q){if(he(q),!k.moved){var G=q.clientX-F,st=q.clientY-J;k.moved=G*G+st*st>m}k.event(q).zoom("mouse",n(T(k.that.__zoom,k.mouse[0]=Ft(q,x),k.mouse[1]),k.extent,s))}function L(q){z.on("mousemove.zoom mouseup.zoom",null),Nr(q.view,k.moved),he(q),k.event(q).end()}}function j(g,...S){if(t.apply(this,arguments)){var x=this.__zoom,k=Ft(g.changedTouches?g.changedTouches[0]:g,this),z=x.invert(k),I=x.k*(g.shiftKey?.5:2),F=n(T(b(x,I),k,z),e.apply(this,S),s);he(g),o>0?xt(this).transition().duration(o).call(A,F,k,g):xt(this).call(_.transform,F,k,g)}}function tt(g,...S){if(t.apply(this,arguments)){var x=g.touches,k=x.length,z=C(this,S,g.changedTouches.length===k).event(g),I,F,J,it;for(hn(g),F=0;F<k;++F)J=x[F],it=Ft(J,this),it=[it,this.__zoom.invert(it),J.identifier],z.touch0?!z.touch1&&z.touch0[2]!==it[2]&&(z.touch1=it,z.taps=0):(z.touch0=it,I=!0,z.taps=1+!!u);u&&(u=clearTimeout(u)),I&&(z.taps<2&&(y=it[0],u=setTimeout(function(){u=null},h)),Xe(this),z.start())}}function rt(g,...S){if(this.__zooming){var x=C(this,S).event(g),k=g.changedTouches,z=k.length,I,F,J,it;for(he(g),I=0;I<z;++I)F=k[I],J=Ft(F,this),x.touch0&&x.touch0[2]===F.identifier?x.touch0[0]=J:x.touch1&&x.touch1[2]===F.identifier&&(x.touch1[0]=J);if(F=x.that.__zoom,x.touch1){var L=x.touch0[0],q=x.touch0[1],G=x.touch1[0],st=x.touch1[1],U=(U=G[0]-L[0])*U+(U=G[1]-L[1])*U,et=(et=st[0]-q[0])*et+(et=st[1]-q[1])*et;F=b(F,Math.sqrt(U/et)),J=[(L[0]+G[0])/2,(L[1]+G[1])/2],it=[(q[0]+st[0])/2,(q[1]+st[1])/2]}else if(x.touch0)J=x.touch0[0],it=x.touch0[1];else return;x.zoom("touch",n(T(F,J,it),x.extent,s))}}function lt(g,...S){if(this.__zooming){var x=C(this,S).event(g),k=g.changedTouches,z=k.length,I,F;for(hn(g),f&&clearTimeout(f),f=setTimeout(function(){f=null},h),I=0;I<z;++I)F=k[I],x.touch0&&x.touch0[2]===F.identifier?delete x.touch0:x.touch1&&x.touch1[2]===F.identifier&&delete x.touch1;if(x.touch1&&!x.touch0&&(x.touch0=x.touch1,delete x.touch1),x.touch0)x.touch0[1]=this.__zoom.invert(x.touch0[0]);else if(x.end(),x.taps===2&&(F=Ft(F,this),Math.hypot(y[0]-F[0],y[1]-F[1])<p)){var J=xt(this).on("dblclick.zoom");J&&J.apply(this,arguments)}}}return _.wheelDelta=function(g){return arguments.length?(r=typeof g=="function"?g:De(+g),_):r},_.filter=function(g){return arguments.length?(t=typeof g=="function"?g:De(!!g),_):t},_.touchable=function(g){return arguments.length?(i=typeof g=="function"?g:De(!!g),_):i},_.extent=function(g){return arguments.length?(e=typeof g=="function"?g:De([[+g[0][0],+g[0][1]],[+g[1][0],+g[1][1]]]),_):e},_.scaleExtent=function(g){return arguments.length?(a[0]=+g[0],a[1]=+g[1],_):[a[0],a[1]]},_.translateExtent=function(g){return arguments.length?(s[0][0]=+g[0][0],s[1][0]=+g[1][0],s[0][1]=+g[0][1],s[1][1]=+g[1][1],_):[[s[0][0],s[0][1]],[s[1][0],s[1][1]]]},_.constrain=function(g){return arguments.length?(n=g,_):n},_.duration=function(g){return arguments.length?(o=+g,_):o},_.interpolate=function(g){return arguments.length?(c=g,_):c},_.on=function(){var g=l.on.apply(l,arguments);return g===l?_:g},_.clickDistance=function(g){return arguments.length?(m=(g=+g)*g,_):Math.sqrt(m)},_.tapDistance=function(g){return arguments.length?(p=+g,_):p},_}var _l=at('<span class="tooltip-tag svelte-zf24ck"> </span>'),ml=at('<div class="tooltip svelte-zf24ck"><div class="tooltip-name svelte-zf24ck"> </div> <div class="tooltip-meta svelte-zf24ck"><!> </div> <div class="tooltip-tags svelte-zf24ck"></div></div>'),xl=at('<div class="graph-container gpu-canvas svelte-zf24ck" role="img" aria-label="Comedian network graph"><canvas class="svelte-zf24ck"></canvas> <!></div>');function wl(t,e){be(e,!1);const n=()=>mt(Pe,"$selectedEdgeId",s),r=()=>mt(re,"$selectedNodeId",s),i=()=>mt(on,"$filteredNodes",s),a=()=>mt(Se,"$filteredEdges",s),[s,o]=Qe();let c=Bt(),l=Bt(),u=Bt(),y,f=ie,h=800,w=600,m=1,p=Bt(null),_=Bt(0),b=Bt(0),T=!1,d=[],A=[],C=new Map,P=new Map;function B(){P.clear();for(const R of A)P.set(R.sourceId,(P.get(R.sourceId)||0)+1),P.set(R.targetId,(P.get(R.targetId)||0)+1)}function K(){!v(l)||!v(c)||(m=window.devicePixelRatio||1,h=v(c).clientWidth,w=v(c).clientHeight,ot(l,v(l).width=h*m),ot(l,v(l).height=w*m),ot(l,v(l).style.width=h+"px"),ot(l,v(l).style.height=w+"px"),Tt(u,v(l).getContext("2d",{alpha:!1})),v(u).scale(m,m))}function j(R){const N=P.get(R.id)||0;return Math.max(6,Math.min(24,4+R.notability*2.5+N*.8))}function tt(R){const N=R.tags[0];return Ut[N]||"#94a3b8"}function rt(){if(!v(u))return;const R=document.documentElement.classList.contains("dark"),N=f.k;ot(u,v(u).fillStyle=R?"#020617":"#ffffff"),v(u).fillRect(0,0,h,w),v(u).save(),v(u).translate(f.x,f.y),v(u).scale(N,N);const W=N<.3?3:N<.6?2:1,nt=-f.x/N,ut=-f.y/N,Y=(h-f.x)/N,O=(w-f.y)/N;for(const E of A){if(E.weight<W)continue;const V=C.get(E.sourceId),H=C.get(E.targetId);if(!V||!H||V.x==null||H.x==null)continue;const dt=100,bt=Math.min(V.x,H.x),$t=Math.min(V.y,H.y),It=Math.max(V.x,H.x),Qt=Math.max(V.y,H.y);if(It<nt-dt||bt>Y+dt||Qt<ut-dt||$t>O+dt)continue;const jt=E.id===n(),Gt=r()&&(E.sourceId===r()||E.targetId===r());v(u).beginPath(),v(u).moveTo(V.x,V.y);const ee=(V.x+H.x)/2,kt=(V.y+H.y)/2,Rt=H.x-V.x,qt=H.y-V.y,yt=Math.sqrt(Rt*Rt+qt*qt);if(yt<1)continue;const ce=yt*.05;v(u).quadraticCurveTo(ee-qt*ce/yt,kt+Rt*ce/yt,H.x,H.y),ot(u,v(u).strokeStyle=oe[E.type]||"#94a3b8");const Ee=.5+E.weight*.3;ot(u,v(u).lineWidth=jt?3:Gt?2:Math.max(.3,Ee/Math.sqrt(N)));const en=r()?jt?1:Gt?.9:.08:Math.min(.6,.15+E.weight*.1)*Math.min(1,N*1.5);ot(u,v(u).globalAlpha=en),v(u).stroke()}ot(u,v(u).globalAlpha=1);const X=N<.3?3:N<.5?2:0;for(const E of d){if(E.x==null||E.y==null)continue;const V=j(E);if(E.x+V<nt||E.x-V>Y||E.y+V<ut||E.y-V>O)continue;const H=E.id===r(),dt=r()&&A.some(kt=>kt.sourceId===r()&&kt.targetId===E.id||kt.targetId===r()&&kt.sourceId===E.id),bt=v(p)?.id===E.id;if(!H&&!dt&&!bt&&E.notability<X)continue;const $t=tt(E);ot(u,v(u).globalAlpha=H||dt||!r()?1:.2),(H||bt)&&(ot(u,v(u).shadowColor=$t),ot(u,v(u).shadowBlur=H?20:12)),v(u).beginPath(),v(u).arc(E.x,E.y,V,0,Math.PI*2);const It=v(u).createRadialGradient(E.x-V*.3,E.y-V*.3,V*.1,E.x,E.y,V);It.addColorStop(0,lt($t,40)),It.addColorStop(1,$t),ot(u,v(u).fillStyle=It),v(u).fill(),ot(u,v(u).strokeStyle=H?"#ffffff":R?"rgba(255,255,255,0.3)":"rgba(0,0,0,0.15)"),ot(u,v(u).lineWidth=H?3:1),v(u).stroke(),ot(u,v(u).shadowColor="transparent"),ot(u,v(u).shadowBlur=0),E.source==="auto"&&(ot(u,v(u).fillStyle="#f59e0b"),v(u).beginPath(),v(u).arc(E.x+V*.7,E.y-V*.7,4,0,Math.PI*2),v(u).fill());const Qt=P.get(E.id)||0,jt=E.notability+Qt*.3,Gt=jt>6?.4:jt>4?.6:.8;if(H||bt||dt||N>Gt){ot(u,v(u).globalAlpha=H||dt||!r()?1:.3);const kt=Math.max(9,Math.min(14,12/Math.sqrt(N)));ot(u,v(u).font=`${H?"bold ":""}${kt}px Inter, system-ui`),ot(u,v(u).textAlign="center"),ot(u,v(u).textBaseline="top");const Rt=E.name,qt=v(u).measureText(Rt),yt=E.y+V+4;ot(u,v(u).fillStyle=R?"rgba(2, 6, 23, 0.8)":"rgba(255, 255, 255, 0.9)"),v(u).fillRect(E.x-qt.width/2-3,yt-1,qt.width+6,kt+2),ot(u,v(u).fillStyle=R?"#e2e8f0":"#1e293b"),v(u).fillText(Rt,E.x,yt)}}ot(u,v(u).globalAlpha=1),v(u).restore()}function lt(R,N){const W=parseInt(R.replace("#",""),16),nt=Math.min(255,(W>>16)+N),ut=Math.min(255,(W>>8&255)+N),Y=Math.min(255,(W&255)+N);return`rgb(${nt},${ut},${Y})`}function g(R,N){const[W,nt]=f.invert([R,N]);for(let ut=d.length-1;ut>=0;ut--){const Y=d[ut];if(Y.x==null||Y.y==null)continue;const O=j(Y),X=W-Y.x,E=nt-Y.y;if(X*X+E*E<(O+3)*(O+3))return Y}return null}function S(R){const N=v(l).getBoundingClientRect(),W=g(R.clientX-N.left,R.clientY-N.top);W?(re.set(W.id===r()?null:W.id),Pe.set(null)):(re.set(null),Pe.set(null)),rt()}function x(R){const N=v(l).getBoundingClientRect(),W=R.clientX-N.left,nt=R.clientY-N.top,ut=g(W,nt);ut!==v(p)?(Tt(p,ut),Tt(_,R.clientX),Tt(b,R.clientY),ot(l,v(l).style.cursor=ut?"pointer":"grab"),rt()):ut&&(Tt(_,R.clientX),Tt(b,R.clientY))}function k(R){const N=v(l).getBoundingClientRect(),W=g(R.clientX-N.left,R.clientY-N.top);if(W&&W.x!=null&&W.y!=null){const nt=ie.translate(h/2,w/2).scale(2.5).translate(-W.x,-W.y);xt(v(l)).transition().duration(750).call(z.transform,nt)}}let z,I=null;function F(){z=yl().scaleExtent([.1,8]).on("zoom",N=>{f=N.transform,rt()});const R=xt(v(l));R.call(z),R.call(Ka().subject(N=>{const W=g(N.x,N.y);return W?{x:W.x,y:W.y,node:W}:null}).on("start",N=>{N.subject&&(I=N.subject.node,I&&(I.fx=I.x,I.fy=I.y,y.alphaTarget(.1).restart()))}).on("drag",N=>{if(!I)return;const[W,nt]=f.invert([N.x,N.y]);I.fx=W,I.fy=nt}).on("end",()=>{I&&(I.fx=null,I.fy=null,y.alphaTarget(0)),I=null}))}function J(){y&&y.stop(),B();const R=el().id(N=>N.id).links(A.map(N=>({source:N.sourceId,target:N.targetId,weight:N.weight}))).distance(N=>100+40/Math.max(1,N.weight)).strength(N=>.2+N.weight*.05);y=ul(d).force("link",R).force("charge",cl().strength(N=>-120-N.notability*25).distanceMax(600)).force("center",er(h/2,w/2).strength(.01)).force("collision",Jo().radius(N=>j(N)+8).strength(.8)).force("x",ar(h/2).strength(.008)).force("y",sr(w/2).strength(.008)).alphaDecay(.05).velocityDecay(.5).on("tick",()=>{rt()}).on("end",()=>{T=!0}),y.alpha(.6)}function it(R,N){const W=new Map(d.map(nt=>[nt.id,{x:nt.x,y:nt.y}]));d=R.map(nt=>{const ut=W.get(nt.id);return{...nt,x:ut?.x??h/2+(Math.random()-.5)*400,y:ut?.y??w/2+(Math.random()-.5)*400}}),A=N,C=new Map(d.map(nt=>[nt.id,nt])),T=!1,J()}let L;Jr(()=>{K(),F(),on.subscribe(R=>{A.length,Se.subscribe(N=>{it(R,N)})()}),Se.subscribe(R=>{it(d.length?d:[],R)}),L=new ResizeObserver(()=>{K(),y&&(y.force("center",er(h/2,w/2).strength(.01)),y.force("x",ar(h/2).strength(.008)),y.force("y",sr(w/2).strength(.008)),T?rt():y.alpha(.1).restart())}),L.observe(v(c)),on.subscribe(()=>{})(),Se.subscribe(()=>{})()}),fr(()=>{y&&y.stop(),L&&L.disconnect()});function q(R){const N=C.get(R);if(N&&N.x!=null&&N.y!=null){const W=ie.translate(h/2,w/2).scale(2.5).translate(-N.x,-N.y);xt(v(l)).transition().duration(750).call(z.transform,W),re.set(R)}}function G(){xt(v(l)).transition().duration(500).call(z.transform,ie)}vn(()=>(v(u),i(),a()),()=>{v(u)&&it(i(),a())}),cr();var st={zoomToNode:q,resetZoom:G};ke();var U=xl(),et=M(U);Pn(et,R=>Tt(l,R),()=>v(l));var ft=D(et,2);{var Vt=R=>{var N=ml(),W=M(N),nt=M(W,!0);$(W);var ut=D(W,2),Y=M(ut);{var O=V=>{var H=Xr();ct(()=>Q(H,`${v(p),Et(()=>v(p).bornYear)??""}${v(p),Et(()=>v(p).diedYear?`â${v(p).diedYear}`:"âpresent")??""}`)),Z(V,H)};Nt(Y,V=>{v(p),Et(()=>v(p).bornYear)&&V(O)})}var X=D(Y);$(ut);var E=D(ut,2);Mt(E,5,()=>(v(p),Et(()=>v(p).tags)),At,(V,H)=>{const dt=Fe(()=>(ne(pn),v(H),Et(()=>pn[v(H)]))),bt=Fe(()=>(ne(pe),ne(v(dt)),Et(()=>pe.find(Qt=>Qt.id===v(dt)))));var $t=_l(),It=M($t);$($t),ct(()=>{Dt($t,`background: ${ne(Ut),v(H),Et(()=>Ut[v(H)]||"#94a3b8")??""}40; color: ${ne(Ut),v(H),Et(()=>Ut[v(H)]||"#94a3b8")??""}`),Q(It,`${ne(v(bt)),Et(()=>v(bt)?.emoji??"")??""} ${v(H)??""}`)}),Z(V,$t)}),$(E),$(N),ct(V=>{Dt(N,`left: ${v(_)+12}px; top: ${v(b)-12}px;`),Q(nt,(v(p),Et(()=>v(p).name))),Q(X,` Â· ${V??""} connections`)},[()=>(v(p),Et(()=>P.get(v(p).id)||0))]),Z(R,N)};Nt(ft,R=>{v(p)&&R(Vt)})}$(U),Pn(U,R=>Tt(c,R),()=>v(c)),ht("click",et,S),ht("mousemove",et,x),ht("dblclick",et,k),Z(t,U),Yn(e,"zoomToNode",q),Yn(e,"resetZoom",G);var Ct=$e(st);return o(),Ct}var bl=at('<p class="aka svelte-7cppg"> </p>'),$l=at('<span class="year"> </span> <span class="timeline-bar svelte-7cppg"></span> <span class="year"> </span>',1),kl=at('<p class="active-range svelte-7cppg"> </p>'),Nl=at('<span class="detail-tag svelte-7cppg"><span class="tag-cat-icon svelte-7cppg"> </span> </span>'),Ml=at('<div class="auto-badge svelte-7cppg"><svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"></circle><line x1="12" y1="8" x2="12" y2="12"></line><line x1="12" y1="16" x2="12.01" y2="16"></line></svg> Auto-ingested â needs verification</div>'),Al=at('<div class="alliance-years svelte-7cppg"> </div>'),El=at('<button class="alliance-item svelte-7cppg"><div class="alliance-header svelte-7cppg"><span class="alliance-type svelte-7cppg"> </span> <span class="alliance-weight svelte-7cppg"> </span></div> <div class="alliance-name svelte-7cppg"> </div> <div class="alliance-summary svelte-7cppg"> </div> <!></button>'),Tl=at('<a target="_blank" rel="noopener noreferrer" class="ext-link svelte-7cppg"><svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line></svg> </a>'),Sl=at('<section class="links-section svelte-7cppg"><h3 class="svelte-7cppg">Links</h3> <!></section>'),zl=at('<div class="panel-header svelte-7cppg"><div><h2 class="svelte-7cppg"> </h2> <!></div> <button class="close-btn svelte-7cppg" aria-label="Close details"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg></button></div> <div class="bio-section svelte-7cppg"><div class="timeline svelte-7cppg"><!></div> <!></div> <div class="tags-section svelte-7cppg"><div class="tags-row svelte-7cppg"></div> <span class="notability-badge svelte-7cppg" title="Notability score"> </span></div> <!> <section class="alliances-section svelte-7cppg"><h3 class="svelte-7cppg"> </h3> <div class="alliances-list svelte-7cppg"></div></section> <!>',1),Cl=at('<div class="empty-state svelte-7cppg"><div class="empty-icon svelte-7cppg">ð</div> <p>Click a comedian on the graph to explore their alliances</p> <p class="hint svelte-7cppg">Use âK to search</p></div>'),Il=at('<aside aria-label="Details"><!></aside>');function Rl(t,e){be(e,!1);const n=()=>mt(Wr,"$selectedNode",i),r=()=>mt(Ur,"$selectedNodeAlliances",i),[i,a]=Qe();function s(){re.set(null),Pe.set(null)}ke();var o=Il();let c;var l=M(o);{var u=f=>{var h=zl(),w=dn(h),m=M(w),p=M(m),_=M(p,!0);$(p);var b=D(p,2);{var T=L=>{var q=bl(),G=M(q);$(q),ct(st=>Q(G,`aka ${st??""}`),[()=>n().aka.join(", ")]),Z(L,q)};Nt(b,L=>{n().aka.length>0&&L(T)})}$(m);var d=D(m,2);$(w);var A=D(w,2),C=M(A),P=M(C);{var B=L=>{var q=$l(),G=dn(q),st=M(G,!0);$(G);var U=D(G,4),et=M(U,!0);$(U),ct(()=>{Q(st,n().bornYear),Q(et,n().diedYear??"present")}),Z(L,q)};Nt(P,L=>{n().bornYear&&L(B)})}$(C);var K=D(C,2);{var j=L=>{var q=kl(),G=M(q);$(q),ct(()=>Q(G,`Active: ${n().activeStartYear??""}â${n().activeEndYear??"present"??""}`)),Z(L,q)};Nt(K,L=>{n().activeStartYear&&L(j)})}$(A);var tt=D(A,2),rt=M(tt);Mt(rt,5,()=>n().tags,At,(L,q)=>{const G=Fe(()=>pn[v(q)]),st=Fe(()=>pe.find(Ct=>Ct.id===v(G)));var U=Nl(),et=M(U),ft=M(et,!0);$(et);var Vt=D(et,1,!0);$(U),ct(()=>{Dt(U,`background: ${(Ut[v(q)]||"#94a3b8")??""}20; color: ${(Ut[v(q)]||"#94a3b8")??""}; border: 1px solid ${(Ut[v(q)]||"#94a3b8")??""}40`),Le(U,"title",`${v(st)?.label??"Tag"??""}: ${v(q)??""}`),Q(ft,v(st)?.emoji??"ð·ï¸"),Q(Vt,v(q))}),Z(L,U)}),$(rt);var lt=D(rt,2),g=M(lt);$(lt),$(tt);var S=D(tt,2);{var x=L=>{var q=Ml();Z(L,q)};Nt(S,L=>{n().source==="auto"&&L(x)})}var k=D(S,2),z=M(k),I=M(z);$(z);var F=D(z,2);Mt(F,5,r,At,(L,q)=>{let G=()=>v(q).edge,st=()=>v(q).other;var U=El(),et=M(U),ft=M(et),Vt=M(ft,!0);$(ft);var Ct=D(ft,2),R=M(Ct);$(Ct),$(et);var N=D(et,2),W=M(N,!0);$(N);var nt=D(N,2),ut=M(nt,!0);$(nt);var Y=D(nt,2);{var O=X=>{var E=Al(),V=M(E);$(E),ct(()=>Q(V,`${G().startYear??""}â${G().endYear??"present"??""}`)),Z(X,E)};Nt(Y,X=>{G().startYear&&X(O)})}$(U),ct((X,E)=>{Dt(ft,`background: ${oe[G().type]??""}20; color: ${oe[G().type]??""}`),Q(Vt,G().type),Q(R,`${X??""}${E??""}`),Q(W,st()?.name??"Unknown"),Q(ut,G().summary)},[()=>"â".repeat(G().weight),()=>"â".repeat(5-G().weight)]),ht("click",U,()=>{st()&&re.set(st().id)}),Z(L,U)}),$(F),$(k);var J=D(k,2);{var it=L=>{var q=Sl(),G=D(M(q),2);Mt(G,1,()=>n().links,At,(st,U)=>{var et=Tl(),ft=D(M(et));$(et),ct(()=>{Le(et,"href",v(U).url),Q(ft,` ${v(U).label??""}`)}),Z(st,et)}),$(q),Z(L,q)};Nt(J,L=>{n().links.length>0&&L(it)})}ct((L,q)=>{Q(_,n().name),Q(g,`${L??""}${q??""}`),Q(I,`Alliances (${r().length??""})`)},[()=>"â".repeat(n().notability),()=>"â".repeat(5-n().notability)]),ht("click",d,s),Z(f,h)},y=f=>{var h=Cl();Z(f,h)};Nt(l,f=>{n()?f(u):f(y,!1)})}$(o),ct(()=>c=de(o,1,"details-panel svelte-7cppg",null,c,{open:n()!==null})),Z(t,o),$e(),a()}var Dl=Ke('<svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor"><rect x="6" y="4" width="4" height="16"></rect><rect x="14" y="4" width="4" height="16"></rect></svg>'),Pl=Ke('<svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor"><polygon points="5 3 19 12 5 21 5 3"></polygon></svg>'),Yl=at('<button class="decade-btn svelte-wfqo9c"> </button>'),ql=at('<div class="time-control svelte-wfqo9c" role="region" aria-label="Time range filter"><div class="time-main svelte-wfqo9c"><button class="play-btn svelte-wfqo9c"><!></button> <div class="slider-container svelte-wfqo9c"><div class="slider-track svelte-wfqo9c"><input type="range" min="1895" max="2025" class="range-input start svelte-wfqo9c" aria-label="Start year"/> <input type="range" min="1895" max="2025" class="range-input end svelte-wfqo9c" aria-label="End year"/></div></div> <div class="year-display svelte-wfqo9c"><span class="year-badge svelte-wfqo9c"> </span> <span class="year-sep svelte-wfqo9c">â</span> <span class="year-badge svelte-wfqo9c"> </span></div></div> <div class="decade-jumps svelte-wfqo9c"><!> <button class="decade-btn all svelte-wfqo9c">All</button></div></div>');function Ol(t,e){be(e,!1);const n=()=>mt(Xt,"$yearRange",i),r=()=>mt(ln,"$isPlaying",i),[i,a]=Qe(),s=Bt(),o=Bt();let c=null;function l(x){const k=parseInt(x.target.value);k<=v(o)&&Xt.set([k,v(o)])}function u(x){const k=parseInt(x.target.value);k>=v(s)&&Xt.set([v(s),k])}function y(){ln.update(x=>x?(c&&clearInterval(c),!1):(Xt.set([1895,1895]),c=setInterval(()=>{Xt.update(([k,z])=>z>=2025?(ln.set(!1),c&&clearInterval(c),[1895,2025]):[k,Math.min(2025,z+1)])},80),!0))}const f=[1910,1920,1930,1940,1950,1960,1970,1980,1990,2e3,2010,2020];function h(x){Xt.set([x,x+9])}fr(()=>{c&&clearInterval(c)}),vn(()=>n(),()=>{Tt(s,n()[0])}),vn(()=>n(),()=>{Tt(o,n()[1])}),cr(),ke();var w=ql(),m=M(w),p=M(m),_=M(p);{var b=x=>{var k=Dl();Z(x,k)},T=x=>{var k=Pl();Z(x,k)};Nt(_,x=>{r()?x(b):x(T,!1)})}$(p);var d=D(p,2),A=M(d),C=M(A);Be(C);var P=D(C,2);Be(P),$(A),$(d);var B=D(d,2),K=M(B),j=M(K,!0);$(K);var tt=D(K,4),rt=M(tt,!0);$(tt),$(B),$(m);var lt=D(m,2),g=M(lt);Mt(g,1,()=>f,At,(x,k)=>{var z=Yl(),I=M(z);$(z),ct(()=>Q(I,`${v(k)??""}s`)),ht("click",z,()=>h(v(k))),Z(x,z)});var S=D(g,2);$(lt),$(w),ct(()=>{Le(p,"title",r()?"Pause":"Play through years"),Rn(C,v(s)),Rn(P,v(o)),Q(j,v(s)),Q(rt,v(o))}),ht("click",p,y),ht("input",C,l),ht("input",P,u),ht("click",S,()=>Xt.set([1895,2025])),Z(t,w),$e(),a()}var Xl=at('<span class="legend-item svelte-1wfxrff"><span class="leg-line svelte-1wfxrff"></span> <span class="leg-label svelte-1wfxrff"> </span></span>'),Fl=at('<span class="legend-item svelte-1wfxrff"><span class="leg-dot svelte-1wfxrff"></span> <span class="leg-label svelte-1wfxrff"> </span></span>'),Bl=at('<div class="legend-group svelte-1wfxrff"><span class="legend-title svelte-1wfxrff"> </span> <!></div>'),Ll=at('<div class="legend svelte-1wfxrff" role="region" aria-label="Graph legend"><div class="legend-group svelte-1wfxrff"><span class="legend-title svelte-1wfxrff">Edges</span> <!></div> <!></div>');function Hl(t,e){be(e,!1),ke();var n=Ll(),r=M(n),i=D(M(r),2);Mt(i,1,()=>gn,At,(s,o)=>{var c=Xl(),l=M(c),u=D(l,2),y=M(u,!0);$(u),$(c),ct(()=>{Dt(l,`background:${oe[v(o)]??""}`),Q(y,v(o))}),Z(s,c)}),$(r);var a=D(r,2);Mt(a,1,()=>pe,At,(s,o)=>{var c=Bl(),l=M(c),u=M(l);$(l);var y=D(l,2);Mt(y,1,()=>Object.entries(v(o).tags),At,(f,h)=>{var w=lr(()=>ur(v(h),2));let m=()=>v(w)[0],p=()=>v(w)[1];var _=Fl(),b=M(_),T=D(b,2),d=M(T,!0);$(T),$(_),ct(()=>{Dt(b,`background:${p()??""}`),Q(d,m())}),Z(f,_)}),$(c),ct(()=>Q(u,`${v(o).emoji??""} ${v(o).label??""}`)),Z(s,c)}),$(n),Z(t,n),$e()}var Vl=at('<meta name="description" content="Explore comedian alliances across decades with an interactive network graph."/>'),jl=at('<div class="explorer svelte-1uha8ag"><!> <div class="center-col svelte-1uha8ag"><div class="graph-wrap svelte-1uha8ag"><!> <!></div> <!></div> <!></div>');function su(t){var e=jl();Vr("1uha8ag",l=>{var u=Vl();Lr(()=>{Hr.title="CartoJester â Comedian Alliances Atlas"}),Z(l,u)});var n=M(e);li(n,{});var r=D(n,2),i=M(r),a=M(i);wl(a,{});var s=D(a,2);Hl(s,{}),$(i);var o=D(i,2);Ol(o,{}),$(r);var c=D(r,2);Rl(c,{}),$(e),Z(t,e)}export{su as component};
