import{M as b,N as T,O as l,P as A,j as p,Q as v,l as d,o as N,R,T as S,k,U as w,V as D,W as E,X as M,Y as I,Z as y,n as F,s as m,K as g,I as O,g as x,_ as U,a0 as Y,D as B}from"./CmCtERzj.js";import{s as C,g as H}from"./CUfRWbJL.js";class P{anchor;#s=new Map;#t=new Map;#e=new Map;#r=new Set;#a=!0;constructor(s,t=!0){this.anchor=s,this.#a=t}#i=()=>{var s=b;if(this.#s.has(s)){var t=this.#s.get(s),e=this.#t.get(t);if(e)T(e),this.#r.delete(t);else{var n=this.#e.get(t);n&&(this.#t.set(t,n.effect),this.#e.delete(t),n.fragment.lastChild.remove(),this.anchor.before(n.fragment),e=n.effect)}for(const[a,i]of this.#s){if(this.#s.delete(a),a===s)break;const f=this.#e.get(i);f&&(l(f.effect),this.#e.delete(i))}for(const[a,i]of this.#t){if(a===t||this.#r.has(a))continue;const f=()=>{if(Array.from(this.#s.values()).includes(a)){var o=document.createDocumentFragment();R(i,o),o.append(p()),this.#e.set(a,{effect:i,fragment:o})}else l(i);this.#r.delete(a),this.#t.delete(a)};this.#a||!e?(this.#r.add(a),A(i,f,!1)):f()}}};#n=s=>{this.#s.delete(s);const t=Array.from(this.#s.values());for(const[e,n]of this.#e)t.includes(e)||(l(n.effect),this.#e.delete(e))};ensure(s,t){var e=b,n=S();if(t&&!this.#t.has(s)&&!this.#e.has(s))if(n){var a=document.createDocumentFragment(),i=p();a.append(i),this.#e.set(s,{effect:v(()=>t(i)),fragment:a})}else this.#t.set(s,v(()=>t(this.anchor)));if(this.#s.set(e,s),n){for(const[f,c]of this.#t)f===s?e.unskip_effect(c):e.skip_effect(c);for(const[f,c]of this.#e)f===s?e.unskip_effect(c.effect):e.skip_effect(c.effect);e.oncommit(this.#i),e.ondiscard(this.#n)}else d&&(this.anchor=N),this.#i()}}function L(r,s,t=!1){d&&w();var e=new P(r),n=t?D:0;function a(i,f){if(d){const h=E(r);var c;if(h===M?c=0:h===I?c=!1:c=parseInt(h.substring(1)),i!==c){var o=y();F(o),e.anchor=o,m(!1),e.ensure(i,f),m(!0);return}}e.ensure(i,f)}k(()=>{var i=!1;s((f,c=0)=>{i=!0,a(c,f)}),i||a(!1,null)},n)}let u=!1,_=Symbol();function Q(r,s,t){const e=t[s]??={store:null,source:O(void 0),unsubscribe:g};if(e.store!==r&&!(_ in t))if(e.unsubscribe(),e.store=r??null,r==null)e.source.v=void 0,e.unsubscribe=g;else{var n=!0;e.unsubscribe=C(r,a=>{n?e.source.v=a:B(e.source,a)}),n=!1}return r&&_ in t?H(r):x(e.source)}function V(r,s){return r.set(s),s}function W(){const r={};function s(){U(()=>{for(var t in r)r[t].unsubscribe();Y(r,_,{enumerable:!1,value:!0})})}return[r,s]}function X(r){var s=u;try{return u=!1,[r(),u]}finally{u=s}}export{P as B,Q as a,V as b,X as c,L as i,W as s};
